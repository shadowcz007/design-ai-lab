{
  "id": "70e6bcaa0a8eeaf5d4c03dcaddd027e862b3eeea",
  "poster": "data:image/png;base64,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",
  "title": "拼图-把多张图拼成一张",
  "knowledge": {
    "course": "",
    "readme": "拼图-把多张图拼成一张",
    "author": "shadow",
    "version": "0.4.2"
  },
  "code": "// 智能裁切的开关有bug\nvar mainDiv\n\nvar layout = new Lab.Canvas(300, 300)\nvar strokeWidth = 12,\n  w = (h = 300),\n  strokeColor = 'black'\nvar _WIDTH = 600,\n  _HEIGHT = 1200\n\nvar layoutSeeds = [\n    [1200, 1200],\n    [1200, 600],\n    [600, 1200],\n    [480, 1200]\n  ],\n  layoutSeedsIndex = 0\n\nvar mainBoard, colorIn\n\nvar isDoing = false\nvar _ISAUTOCROP = true\nvar _URLS\n\nvar inputLogoText = ``\n\nvar store = new Lab.Store('unsplash')\n\nvar getLayoutSeeds = (seed = 0) =>\n  Lab.base.shuffle(\n    seed === 0\n      ? [\n          [2.5, 1, 0, [3, 1]],\n          [2.5, 1, 0, [1, 2]],\n          [2.5, 1, 0, [2, 1.2]],\n          [2.5, 1, 0, [1, 1]]\n        ]\n      : [\n          [1.15, 1, 1, [1, 2.3]],\n          [1.15, 1, 1, [1, 2]],\n          [1.15, 1, 1, [2, 1.2]],\n          [1.15, 1, 1, [1, 1]]\n        ]\n  )[0]\n\nvar layoutDict = {\n  2: async () => {\n    let p = getLayoutSeeds(Math.round(Math.random() + 0.1))\n\n    let height = _HEIGHT\n    var group = new Lab.FlexLayout()\n    await group.init()\n    let res = group.createGrid(\n      height * p[0],\n      p[1] * height,\n      p[2],\n      p[3],\n      strokeWidth,\n      true\n    )\n    return {\n      mainStyle: {\n        left: 0,\n        top: 0,\n        width: res[1].left + res[1].width + res[0].left,\n        height: res[1].top + res[1].height + res[0].top\n      },\n      styles: res\n    }\n  },\n  3: async () => {\n    let p = getLayoutSeeds(1),\n      p2 = getLayoutSeeds(0)\n    let h = _HEIGHT\n    var group = new Lab.FlexLayout()\n    await group.init()\n    let res = group.createGrid(\n      h * p[0],\n      p[1] * h,\n      p[2],\n      p[3],\n      strokeWidth,\n      true\n    )\n\n    let n = 1\n    let { left, top } = res[n]\n    res[n] = group.createGrid(\n      res[n].width,\n      (p2[1] / p2[0]) * res[n].width,\n      p2[2],\n      p2[3],\n      strokeWidth,\n      false\n    )\n    res[n].forEach(r => {\n      r.left = r.left + left\n      r.top = r.top + top\n    })\n\n    res = res.flat()\n\n    return {\n      mainStyle: {\n        left: 0,\n        top: 0,\n        width: res[2].left + res[2].width + res[0].left,\n        height: res[2].top + res[2].height + res[0].top\n      },\n      styles: res\n    }\n  },\n  4: async () => {\n    let res = await layoutDict[3]()\n    let { left, top } = res.styles[0],\n      height = res.mainStyle.height - top * 2,\n      width = res.mainStyle.width\n\n    if (Math.random() > 0.46) {\n      // 左右\n      let ws = Array.from(res.styles, s => s.width)\n      let width = Lab.base.shuffle(ws)[0]\n\n      let isLeft = Math.random() > 0.5\n      res.styles.push({\n        left: isLeft ? -width : res.mainStyle.width,\n        top,\n        width,\n        height\n      })\n      res.mainStyle.width += left + width\n      isLeft ? (res.mainStyle.left -= left + width) : null\n    } else {\n      // 上下\n      let hs = Array.from(res.styles, s => s.height)\n      let h = Math.round(\n        Lab.base.shuffle(hs)[0] * Math.max(Math.random(), 0.45)\n      )\n      let isTop = Math.random() > 0.5\n      res.styles.push({\n        left,\n        top: isTop ? -h : height + top * 2,\n        width: width - left * 2,\n        height: h\n      })\n      res.mainStyle.height += top + h\n      res.mainStyle.top -= isTop ? top + h : 0\n    }\n\n    return res\n  }\n}\n\nfunction gui () {\n  mainDiv = Lab.ui.createGroup('container')\n  mainDiv.style.width = '100%'\n  let controlDiv = Lab.ui.createGroup('column')\n  controlDiv.style.display = 'flex'\n  controlDiv.style.justifyContent = 'space-around'\n  let controlBtns = Lab.ui.createGroup('column')\n\n  let refreshBtn = Lab.ui.createIcon('refresh', async () => {\n    await start(_URLS)\n  })\n\n  let rangeWidth = Lab.ui.createInput('range', '描边', async ns => {\n    strokeWidth = ~~ns[0]\n    rangeWidth.input.disabled = true\n    rangeWidth.input.max = 100\n    rangeWidth.input.min = 12\n    rangeWidth.input.step = 2\n    // console.log(range.input)\n    // await start(_URLS);\n    rangeWidth.input.disabled = false\n  })\n  rangeWidth.style.margin = '24px 0'\n\n  colorIn = Lab.ui.createInput('color', '颜色', async ns => {\n    strokeColor = ns[0]\n    // await start(_URLS);\n  })\n  colorIn.style.margin = '24px 0'\n\n  let logoTextIn = Lab.ui.createInput('text', '主标题', async res => {\n    inputLogoText = res[0]\n    // await start(_URLS);\n    // console.log(res)\n  })\n  logoTextIn.style.margin = '24px 0'\n\n  let inImgs = Lab.ui.createInput('imgs', '多图', start, true, false)\n  let plusBtn = Lab.ui.createIcon('plus', async () => {\n    let im = Lab.clipboard.read('img')\n    if (im) {\n      let base64 = im.toDataURL()\n      inImgs.add(base64)\n      // 颜色提取\n      let c = new Lab.Color()\n      let mainColor = await c.getColor(await Lab.ui.createImage(base64))\n      strokeColor = new Lab.Color(mainColor).hex()\n      colorIn.setDefaultValue([strokeColor])\n    }\n  })\n  let clearBtn = Lab.ui.createIcon('clear', () => {\n    layout.reset()\n    inImgs.reset()\n  })\n  let downloadBtn = Lab.ui.createButton(\n    '另存为',\n    () => {\n      Lab.ui.saveBase64Dialog(layout.exportImage(mainBoard, 4, 'png'))\n    },\n    false\n  )\n  let copyBtn = Lab.ui.createButton(\n    '拷贝',\n    () => {\n      let base64 = layout.exportImage(mainBoard, 4, 'png')\n      Lab.clipboard.write(base64, 'base64')\n    },\n    false\n  )\n\n  let imgInputs = Lab.ui.createGroup('column')\n\n  let btns = Lab.ui.createGroup('column')\n\n  let unsplash = Lab.ui.createGroup('card')\n  let token\n  let inputToken = Lab.ui.createInput('text', 'Unsplash Access Key', e => {\n    token = e[0]\n  })\n  let unsplashData = []\n  let runUnsplash = Lab.ui.createButton('获取', async () => {\n    let res = await Lab.Image.getUnsplash(token)\n    console.log(res)\n    if (res) {\n      for (const r of res) {\n        if (!unsplashData.includes(r.urls.small))\n          unsplashData.push(r.urls.small)\n      }\n    }\n    store.set('data', unsplashData)\n    let nds = [...Lab.base.shuffle(unsplashData)].slice(0, 5)\n    start(nds)\n  })\n\n  mainDiv.add(layout.getElement())\n  mainDiv.add(controlDiv)\n\n  controlDiv.add(controlBtns)\n  controlBtns.add(refreshBtn)\n  controlBtns.add(rangeWidth)\n  controlBtns.add(colorIn)\n  controlBtns.add(logoTextIn)\n\n  controlDiv.add(imgInputs)\n  imgInputs.add(inImgs)\n  imgInputs.add(btns)\n  btns.add(plusBtn)\n  btns.add(clearBtn)\n  btns.add(downloadBtn)\n  btns.add(copyBtn)\n\n  unsplash.add(inputToken)\n  unsplash.add(runUnsplash)\n  mainDiv.add(unsplash)\n\n  mainDiv.add(Lab.ui.createToggleDevToolsIcon())\n\n  Lab.ui.add(mainDiv)\n\n  store.get('data').then(d => (unsplashData = d))\n}\n\nasync function start (data) {\n  if (isDoing) return\n  if (!data) return\n  layout.reset()\n  isDoing = true\n  data = Lab.base.shuffle(data)\n  // console.log(data)\n  await doImgs(data)\n  isDoing = false\n}\n\nasync function doImgs (urls) {\n  // console.log(urls)\n  _URLS = [...urls]\n  if (!(_URLS && _URLS.length > 0)) return\n\n  // urls=[...urls];\n  let imgs = []\n  for (let url of _URLS) {\n    let im = await Lab.ui.createImage(url)\n    // console.log(im)\n    if (im)\n      imgs.push({\n        img: im,\n        // crop: cropCanvas,\n        width: _ISAUTOCROP == false ? im.width : w,\n        height: _ISAUTOCROP == false ? im.height : h,\n        oWidth: im.width,\n        oHeigth: im.height,\n        ratio: im.width / im.height\n      })\n  }\n\n  if (imgs.length < 4 && inputLogoText && inputLogoText.trim())\n    imgs.push({\n      canvas: Lab.ui.createTextCanvas(inputLogoText, { fontSize: _WIDTH })\n    })\n\n  imgs = Lab.base.shuffle(imgs)\n\n  let groupResult\n  if (layoutDict[imgs.length]) {\n    groupResult = await layoutDict[imgs.length]()\n  } else {\n    let group = new Lab.FlexLayout()\n    await group.init()\n    let [w, h] = layoutSeeds[layoutSeedsIndex];\n    groupResult = group.masonry(w, h, imgs);\n    layoutSeedsIndex++;\n    if(layoutSeedsIndex>=layoutSeeds.length) layoutSeedsIndex=0;\n  }\n\n  // console.log(groupResult)\n\n  mainBoard = layout.addRect(\n    Object.assign(groupResult.mainStyle, {\n      fill: strokeColor || 'white',\n      left: groupResult.mainStyle.left,\n      top: groupResult.mainStyle.top,\n      width: groupResult.mainStyle.width,\n      height: groupResult.mainStyle.height\n    }),\n    true,\n    true\n  )\n\n  groupResult.styles.forEach(async (s, i) => {\n    if (_ISAUTOCROP) {\n      if (imgs[i].img) {\n        let cropCanvas = await Lab.Image.smartCrop(\n          imgs[i].img,\n          s.width,\n          s.height\n        )\n        let canvas = await Lab.ui.createImage(cropCanvas.toDataURL())\n        layout.addImg(canvas, {\n          // strokeWidth: strokeWidth, stroke: strokeColor,\n          left: s.left,\n          top: s.top,\n          width: s.width,\n          height: s.height\n        })\n      } else if (imgs[i].canvas) {\n        console.log(imgs[i].canvas.width, s.width)\n        let canvas = await Lab.ui.createImage(imgs[i].canvas.toDataURL(s.width))\n        layout.addImg(canvas, {\n          // strokeWidth: strokeWidth, stroke: strokeColor,\n          left: s.left,\n          top: s.top,\n          width: s.width,\n          height: s.height\n        })\n      }\n    } else {\n      if (imgs[i].img) {\n        layout.addAndResizeImage(imgs[i].img, {\n          // strokeWidth: strokeWidth, stroke: strokeColor,\n          left: s.left,\n          top: s.top,\n          width: s.width,\n          height: s.height\n        })\n      } else if (imgs[i].canvas) {\n        let canvas = await Lab.ui.createImage(imgs[i].canvas.toDataURL(s.width))\n        layout.addAndResizeImage(canvas, {\n          // strokeWidth: strokeWidth, stroke: strokeColor,\n          left: s.left,\n          top: s.top,\n          width: s.width,\n          height: s.height\n        })\n      }\n    }\n    // let rect = layout.addRect({\n    //     strokeWidth: 2,\n    //     stroke: strokeColor,\n    //     fill: 'transparent',\n    //     left: s.left + strokeWidth,\n    //     top: s.top + strokeWidth,\n    //     width: s.width - strokeWidth,\n    //     height: s.height - strokeWidth\n    // }, true, true);\n    // rect.name = 'grid';\n    // await Lab.base.sleep(200);\n    // rect.moveTo(groupResult.styles.length * 20)\n  })\n\n  // await Lab.base.sleep(200);\n  // layout.getObjects().forEach(o => o.name === 'grid' ? o.moveTo(groupResult.styles.length * 20) : null);\n\n  await Lab.base.sleep(200)\n  layout.zoomToFitCanvas()\n}\n",
  "code_length": 82,
  "size": [
    496,
    769
  ],
  "extname": "designlabplugin",
  "version": "0.4.2",
  "package_version": "0.1.2",
  "package_id": "4da6fb6d5392c8436b3bdfb2b4d877173833bb7b",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@kilokilo/three-bmfont-text": "^3.1.0",
    "@mediapipe/camera_utils": "^0.3.1632432234",
    "@mediapipe/drawing_utils": "^0.3.1620248257",
    "@mediapipe/holistic": "^0.5.1635989137",
    "@node-rs/jieba": "^1.3.1",
    "@paddlejs-models/humanseg": "0.0.5",
    "@pixiv/three-vrm": "^0.6.7",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "about-window": "^1.14.0",
    "animejs": "^3.2.1",
    "babylonjs": "^4.2.0",
    "babylonjs-gui": "^4.2.0",
    "babylonjs-loaders": "^4.2.0",
    "color": "^3.1.3",
    "dat.gui": "^0.7.7",
    "debounce": "^1.2.1",
    "electron-json-storage": "^4.4.0",
    "electron-squirrel-startup": "^1.0.0",
    "emoji-picker-element": "^1.6.0",
    "emoji-regex": "^9.2.2",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "face-api.js": "^0.22.2",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "horajs": "^0.1.3",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "kalidokit": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "osc-js": "^2.1.2",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "pixelit": "https://github.com/giventofly/pixelit.git",
    "recordrtc": "^5.6.2",
    "regl": "^2.1.0",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "three": "^0.134.0",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1641458697555
}