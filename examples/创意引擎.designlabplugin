{
  "id": "eb0ca0ccb5d01189e888a6169c4894f522bba71d",
  "poster": "data:image/png;base64,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",
  "title": "创意引擎",
  "knowledge": {
    "course": "- 变量\n- 优化ui\n- 基于svg模版的生成\n- 固定数量随机生成\n- 计算稀有度&合成大图",
    "readme": "创意引擎",
    "author": "shadow",
    "version": "0.7"
  },
  "code": "var mainDiv, myCanvas, toolbox, downloadPannel\n\n// 保存坑位\nvar cardElements = {}\n\nvar _CANVAS_WIDTH = Math.min(window.innerWidth * 0.3, 300),\n  _CANVAS_HEIGHT = 300\n\n// svg模版\nvar svgs = []\n\nfunction gui () {\n  window.toast = Lab.base.debounce(() => {\n    if (window.result && window.result.length)\n      Lab.ui.toast(window.result.length)\n  }, 1000)\n\n  // 加载svg库\n  Lab.base.loadFromUrl(\n    'js',\n    'https://cdn.bootcdn.net/ajax/libs/svg.js/3.1.1/svg.min.js'\n  )\n\n  mainDiv = Lab.ui.createGroup('container')\n  Lab.ui.add(mainDiv)\n  mainDiv.style = 'width: 100%;'\n\n  mainDiv.innerHTML = `\n    <div class=\"ui two column divided grid\">\n        <div class=\"stretched row\">\n            <div class=\"column\">\n                <div class=\"ui segment\" id='myCanvas'></div>\n            </div>\n            <div class=\"column\" id=\"toolbox\"></div>\n        </div>\n    </div>\n    <div class=\"ui column divided grid\">\n        <div class=\"stretched row\">\n            <div class=\"column\" id='cards'></div>\n        </div>\n    </div>\n    `\n\n  //\n  downloadPannel = createDownloadPannel()\n  mainDiv.add(downloadPannel)\n\n  myCanvas = new Lab.Canvas(_CANVAS_WIDTH, _CANVAS_HEIGHT)\n  myCanvas.onModified = doModified\n  myCanvas.onClick = doClick\n  myCanvas.onRemoved = doRemoved\n  mainDiv.querySelector('#myCanvas').appendChild(myCanvas.getElement())\n\n  let cardsDiv = Lab.ui.createGroup('cards')\n  mainDiv.querySelector('#cards').appendChild(cardsDiv)\n\n  toolbox = createToolbox()\n  mainDiv.querySelector('#toolbox').appendChild(toolbox)\n\n  let addBtn = Lab.ui.createIcon('plus', () => {\n    Lab.ui.loading(0)\n    let { card, rect } = createCard(cardsDiv)\n    cardElements[card.id] = {\n      element: card,\n      rect: rect,\n      imgUrls: []\n    }\n    setTimeout(() => Lab.ui.loading(100), 200)\n  })\n  addBtn.classList.add('red')\n  addBtn.style = `\n    position:fixed;\n    right:12px;\n    top:240px;\n    `\n\n  myCanvas.addRect(\n    {\n      left: 0,\n      top: 0,\n      width: _CANVAS_WIDTH,\n      height: _CANVAS_HEIGHT,\n      stroke: 'black',\n      fill: 'white'\n    },\n    false,\n    true,\n    true\n  )\n  myCanvas.zoomToFitCanvas()\n\n  // 设定基础模版\n  let preivewImageForBase = Lab.ui.createImageAndPreview()\n  let setBaseBtn = Lab.ui.createButton('0 打开基础模版', () => {\n    Lab.ui.loading(0)\n    let data = Lab.ui.openStringDialog(1)\n    if (data) {\n      window.base = data.data\n      drawBase(preivewImageForBase)\n    }\n    setTimeout(() => Lab.ui.loading(100), 100)\n  })\n  // console.log(preivewImageForBase)\n  Lab.ui.add(setBaseBtn)\n  Lab.ui.add(Lab.ui.createDivider())\n  Lab.ui.add(preivewImageForBase)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  // 打开多个svg文件\n  let openBtn = Lab.ui.createButton('1 打开多个svg文件', () => {\n    Lab.ui.loading(0)\n    svgs = []\n    let datas = Lab.ui.openStringDialog(3)\n    console.log(datas)\n    // 统计变量数量\n    let maskKeys = {}\n    for (const data of datas) {\n      let draw = SVG().addTo('body')\n      draw.__filepath = data.filepath\n      draw.svg(data.data)\n      let parent = draw.children()[0]\n      let styles = parent.attr()\n      draw.width(styles.width)\n      draw.height(styles.height)\n      draw.viewbox(styles.viewBox)\n      draw.node.style.outline = '1px solid gray'\n      draw.node.style.margin = '2px'\n\n      svgs.push(draw)\n      // 预先提取变量\n      let ks = getAllMaskKeys(draw)\n      Array.from(ks, k => {\n        if (maskKeys[k] === undefined) maskKeys[k] = 0\n        maskKeys[k]++\n        // if (!maskKeys.includes(k)) maskKeys.push(k);\n      })\n    }\n    console.log(maskKeys)\n    // 变量设定- 数量显示\n    paramsInput.setValue(JSON.stringify(maskKeys, null, 2))\n    setTimeout(() => Lab.ui.loading(100), 200)\n  })\n  Lab.ui.add(openBtn)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  // 设定哪些变量要提取\n  let paramsInput = Lab.ui.createTextareaInput('变量设定，以 -M 为标记', e => {\n    // console.log(e);\n  })\n\n  Lab.ui.add(paramsInput)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  // 预处理数据\n  let preDataBtn = Lab.ui.createButton('2 预处理', () => {\n    Lab.ui.loading(0)\n    preDataBtn.classList.remove('green')\n    let text = paramsInput.getValue()\n    if (text) {\n      let json = JSON.parse(text)\n      let keys = Object.keys(json)\n      // let keys = text.split('\\n').filter(f => f);\n      if (keys) {\n        window.keysList = {}\n        for (const key of keys) {\n          window.keysList[key] = []\n        }\n        Array.from(svgs, s => initEngine(s, keys))\n        // 成功遍历完成\n        console.log(window.keysList)\n        window.toast()\n      }\n    }\n    // console.log(paramsInput.getValue())\n    preDataBtn.classList.add('green')\n    setTimeout(() => Lab.ui.loading(100), 200)\n  })\n  Lab.ui.add(preDataBtn)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  // 选择算法\n  // let dkBtn=Lab.ui.createButton('3 笛卡尔全量生成',()=>{\n  //     window.result = createAll();\n  //     window.toast();\n  // });\n  // Lab.ui.add(dkBtn);\n  // Lab.ui.add(Lab.ui.createDivider());\n\n  let fixedBtn = Lab.ui.createButton('3 固定数量随机生成100', () => {\n    Lab.ui.loading(0)\n    // window.result = createAllRandom(100);\n    window.toast()\n    create100()\n    setTimeout(() => Lab.ui.loading(100), 200)\n  })\n\n  Lab.ui.add(Lab.ui.createBaseText('生成100个'))\n  Lab.ui.add(fixedBtn)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  function create100 () {\n    window.result = createAllRandom(100)\n    if (window.result) {\n      window.resultIndex = 0\n      window.svgsResult = []\n      for (const features of window.result) {\n        let svg = drawSvg(false, window.base, features)\n        window.svgsResult.push(svg)\n      }\n    }\n  }\n\n  // 下一个\n  let nextBtn = Lab.ui.createButton('下一个', async () => {\n    myCanvas.reset()\n    if (window.resultIndex >= window.svgsResult.length) window.resultIndex = 0\n    window.currentSvg = window.svgsResult.slice(\n      window.resultIndex,\n      window.resultIndex + 1\n    )[0]\n    let url = Lab.base.str2URL(window.currentSvg, 'image/svg+xml;charset=utf-8')\n    let target = await myCanvas.addSVGFromURL(url)\n    target.name = 'svg'\n    window.targetUrl = url\n    window.resultIndex++\n    // 添加到画布上\n    let cardsDiv = Lab.ui.createGroup('cards')\n    mainDiv.querySelector('#cards').appendChild(cardsDiv)\n    let { card, rect } = createCard(cardsDiv)\n    cardElements[card.id] = {\n      element: card,\n      rect: rect,\n      imgs: [\n        {\n          element: target,\n          url: url,\n          type: 'svg'\n        }\n      ]\n    }\n    card.setValue([url])\n    // 缩放表情包\n    updateCanvasImgs(card.id)\n  })\n  Lab.ui.add(Lab.ui.createBaseText('预览'))\n  Lab.ui.add(nextBtn)\n  Lab.ui.add(Lab.ui.createDivider())\n\n  // 设置人类可读的编号前缀 APL+0983\n  let setCodeBtn = Lab.ui.createInput('text', '编号前缀', texts => {\n    if (texts && texts.length) {\n      let t = texts[0]\n      t = t.trim()\n      window.__code = t\n    }\n  })\n\n  let setDownloadFilePathBtn = Lab.ui.createButton('设置本地目录', async () => {\n    // 导出本地文件\n    let filepaths = Lab.ui.getFilePath(2)\n    if (filepaths && filepaths[0]) {\n      window.__download_filepath = filepaths[0]\n    }\n  })\n\n  async function download100 () {\n    if (window.__download_filepath) {\n      // id map\n      let idsMap = {}\n      let i = 1\n      let fileNames = Lab.base.readdirSync(window.__download_filepath)\n      for (const fileName of fileNames) {\n        // 判断是否是文件夹\n        if (Lab.base.fs.statSync(fileName).isDirectory()) {\n          let children = Lab.base.readdirSync(fileName)\n          let id = Lab.base.getBaseName(children[0]).replace(/\\..*/gi, '')\n          idsMap[id] = 1\n          i++\n        }\n      }\n\n      for (const svg of window.svgsResult) {\n        let s = SVG()\n        s.svg(svg)\n        let id = s.children()[0].attr('data-id')\n        if (!idsMap[id]) {\n          let base64 = await Lab.Image.svg2base64(svg, 'png')\n          // 文件夹\n          let dirname0 =\n            window.__download_filepath + '/' + (window.__code || 'A') + i\n          Lab.base.mkdir(dirname0)\n          Lab.base.saveData(dirname0 + '/' + id + '.svg', svg)\n          Lab.base.saveBase64(base64, dirname0 + '/' + id + '.png')\n          i++\n        }\n      }\n    }\n  }\n  // console.log(setCodeBtn)\n  let downAllBtn = Lab.ui.createButton('下载到本地', async () => {\n    window.__code = setCodeBtn.getValue()\n    await download100()\n  })\n  Lab.ui.add(Lab.ui.createBaseText('下载'))\n  Lab.ui.add(setCodeBtn)\n  Lab.ui.add(setDownloadFilePathBtn)\n  Lab.ui.add(downAllBtn)\n\n  let down10000Btn = Lab.ui.createButton('1w下载到本地', async () => {\n    for (let index = 0; index < 100; index++) {\n      create100()\n      await download100()\n      Lab.ui.toast(index)\n      await Lab.base.sleep(1500)\n    }\n  })\n  Lab.ui.add(down10000Btn)\n\n  // 合成全景图\n  let allPicsBtn = Lab.ui.createButton('合成大图&稀有度', async () => {\n    // id map\n    let idsMap = {}\n    let i = 1\n\n    let filepaths = Lab.ui.getFilePath(0)\n    let num = 20\n    let w = (2 * 2048) / num\n    let h\n    let imgs = []\n\n    // 统计\n    let counts = {}\n\n    // 稀有度\n    if (!window.keysList) Lab.ui.toast('请进行预处理')\n    // 计算每个图的稀有属性值，并保存为.md文件\n    let filesRare = {}\n\n    for (const fileName of filepaths) {\n      let children = Lab.base.readdirSync(fileName)\n      let id = Lab.base.getBaseName(children[0]).replace(/\\..*/gi, '')\n\n      let basenameCode=Lab.base.getBaseName(fileName);\n\n      idsMap[id] = 1\n      filesRare[basenameCode] = { fileName }\n\n      let column = Math.ceil(i / num)\n      if (!imgs[column]) imgs[column] = []\n      for (const child of children) {\n        if (Lab.base.getExtName(child).match('png')) {\n          // 用于合成png大图\n          let im = await Lab.Image.createImage(child)\n          im.fileName = basenameCode;\n          h = w / (im.naturalWidth / im.naturalHeight)\n          //   let c = Lab.Image.createCanvasFromImage(im, w, h)\n          //   let ctx = c.getContext('2d')\n          //   ctx.fillStyle = 'black'\n          //   ctx.fillRect(0, h - 44, w, 44)\n          //   ctx.font = '20px Georgia'\n          //   ctx.textBaseline = 'bottom'\n          //   ctx.textAlign = 'right'\n          //   ctx.fillStyle = 'white'\n          //   ctx.fillText(Lab.base.getBaseName(fileName), w - 8, h - 8)\n          imgs[column].push(im)\n        } else if (Lab.base.getExtName(child).match('svg') && window.keysList) {\n          // 用于计算各个元素出现的概率\n          let attrs = {}\n          // console.log(window.keysList) 需要预处理调用成功\n          // console.log(child)\n          let svgStr = Lab.base.readFileSync(child)\n          let draw = SVG()\n          draw.svg(svgStr)\n          for (var k in window.keysList) {\n            let r = draw.findOne('#' + k)\n            if (r) {\n              let id = r.attr('data-id')\n              let obj = window.keysList[k].filter(v => v.id === id)[0]\n              // console.log(k,id);\n              if (obj) {\n                if (!counts[k]) counts[k] = {}\n\n                if (!counts[k][obj.basename]) {\n                  let base64 = await Lab.Image.svg2base64(obj.draw.svg(), 'png')\n                  counts[k][obj.basename] = {\n                    base64,\n                    count: 0\n                  }\n                }\n                counts[k][obj.basename].count++\n                attrs[obj.basename] = 1\n              }\n            }\n          }\n          filesRare[basenameCode].attrs = attrs\n        }\n        // console.log(counts);\n        // window.counts=counts;\n      }\n      i++\n    }\n\n    // Lab.clipboard.write(canvas.toDataURL(),'base64')\n\n    // window.counts=counts;\n    // 统计元素稀有度\n    let ks = []\n    let maxWidth = 0,\n      maxHeight = 0,\n      size = 200\n\n    for (var k in window.keysList) {\n      ks.push({\n        value: window.keysList[k].length,\n        key: k\n      })\n    }\n    ks = ks.sort((a, b) => b.value - a.value)\n    ks = Array.from(ks, k => k.key)\n    for (let index = 0; index < ks.length; index++) {\n      const k = ks[index]\n      // counts[k]\n      let elements = []\n      for (let basename in counts[k]) {\n        let im = await Lab.Image.createImage(counts[k][basename].base64)\n        let canvas = Lab.Image.createCanvasFromImage(im)\n        // 绘制数量到图上\n        let ctx = canvas.getContext('2d')\n        ctx.fillStyle = 'black'\n        ctx.fillRect(0, canvas.height - 56, canvas.width, 56)\n        ctx.font = '38px Georgia'\n        ctx.textBaseline = 'bottom'\n        ctx.textAlign = 'right'\n        ctx.fillStyle = 'white'\n\n        // 稀有度\n        let rare = (\n          (100 * counts[k][basename].count) /\n          filepaths.length\n        ).toFixed(2)\n\n        ctx.fillText(\n          basename.replace(/\\..*/gi, '') + '_' + rare + '%',\n          canvas.width - 8,\n          canvas.height - 8\n        )\n\n        elements.push({\n          basename,\n          value: counts[k][basename].count,\n          rare,\n          canvas\n        })\n      }\n      elements = elements.sort((a, b) => b.value - a.value)\n      maxWidth = Math.max(elements.length * size + 40, maxWidth) + 20\n      ks[index] = {\n        key: k,\n        elements\n      }\n      if (elements.length == 0) ks[index] = null\n    }\n    ks = ks.filter(k => k)\n    maxHeight = ks.length * (size + 20) + 40\n    // console.log(ks,maxWidth,maxHeight)\n\n    // 绘制大图\n    let canvasElements = Lab.Image.createCanvas(maxWidth, maxHeight),\n      ctxElements = canvasElements.getContext('2d')\n\n    for (let k of ks) {\n      let y = size * 1.2 * ks.indexOf(k)\n      if (y + size > canvasElements.height)\n        canvasElements.height = y + 40 + size\n    }\n\n    ctxElements.strokeStyle = 'black'\n    ctxElements.lineWidth = 2\n    ctxElements.font = '14px Georgia'\n    ctxElements.textBaseline = 'top'\n    ctxElements.textAlign = 'left'\n    ctxElements.fillStyle = 'black'\n\n    // 计算每个文件的稀有度\n    window._RARE = {}\n    Array.from(ks, r => {\n      let key = r.key\n      Array.from(r.elements, e => {\n        window._RARE[e.basename] = { key, rare: Number(e.rare) }\n      })\n    })\n\n    window._filesRare = filesRare\n    for (let k of ks) {\n      let y = size * 1.2 * ks.indexOf(k)\n      ctxElements.fillText(k.key, 10, 10 + y)\n      for (let e of k.elements) {\n        let x = k.elements.indexOf(e) * size,\n          xs = (1 + k.elements.indexOf(e)) * 10\n        ctxElements.drawImage(\n          e.canvas,\n          0,\n          0,\n          e.canvas.width,\n          e.canvas.height,\n          x + xs,\n          y + 30,\n          size,\n          size\n        )\n        ctxElements.strokeRect(x + xs, y + 30, size, size)\n      }\n    }\n\n    Lab.ui.saveBase64Dialog(canvasElements.toDataURL(), '保存', '稀有度')\n    // let url=canvasElements.toDataURL();\n    // Lab.ui.add(Lab.ui.createImageAndDownload(url));\n\n    // 绘制-所有文件的大图合集\n    imgs = imgs.filter(i => i)\n    let canvas = Lab.Image.createCanvas(w * num, h * imgs.length)\n    let ctx = canvas.getContext('2d')\n    // console.log(imgs)\n    // 稀有度的总文件\n    let raresText=[];\n\n    for (let index = 0; index < imgs.length; index++) {\n      const ims = imgs[index]\n      for (let j = 0; j < ims.length; j++) {\n        const im = ims[j]\n\n        let c = Lab.Image.createCanvasFromImage(im, w, h)\n        let cx = c.getContext('2d')\n        cx.fillStyle = 'black'\n        cx.fillRect(0, h - 44, w, 44)\n        cx.font = '18px Georgia'\n        cx.textBaseline = 'bottom'\n        cx.textAlign = 'right'\n        cx.fillStyle = 'white'\n        // 在这里加入稀有度的数据\n        // \n        function average(nums) {\n            return nums.reduce((a, b) => a + b) / nums.length;\n        }\n        function sum(nums) {\n            return nums.reduce((a, b) => a + b);\n        }\n        \n        let rare1= [],rareStr='';\n        for(let key in _filesRare[im.fileName].attrs){\n            // console.log(_RARE[key])\n            rare1.push(_RARE[key].rare*0.001);\n            rareStr+=\"_\"+_RARE[key].key+'_'+_RARE[key].rare+'%'\n        };\n        \n        rare1=(sum(rare1)*100).toFixed(2);\n\n        cx.fillText(im.fileName+\"_\"+rare1, w - 8, h - 8)\n    \n        ctx.drawImage(c, j * w, index * h, w, h)\n\n        raresText.push({\n            code:im.fileName,\n            rare:rare1,\n            attrs:rareStr\n        });\n      }\n    }\n    Lab.ui.saveBase64Dialog(canvas.toDataURL(), '保存', '大图');\n    Lab.ui.saveJsonDialog(raresText);\n  })\n  Lab.ui.add(allPicsBtn)\n}\n\n// 调整内容\nfunction updateCanvasImgs (id) {\n  let { rect, imgs } = cardElements[id]\n  for (const img of imgs) {\n    if (img.type === 'svg') {\n      img.element.left = rect.left\n      img.element.top = rect.top\n      img.element.scaleToHeight(rect.getScaledHeight())\n      img.element.scaleToWidth(rect.getScaledWidth())\n      myCanvas.render()\n    }\n  }\n}\n\nfunction drawBase (preImg) {\n  var draw = SVG()\n  draw.svg(window.base)\n  var parent = draw.children()[0]\n  var styles = parent.attr()\n  draw.width('120px')\n  draw.height('120px')\n  draw.viewbox(styles.viewBox)\n  let gs = Array.from(draw.find('g'), g => g)\n  gs[0].attr('stroke', 'red')\n  preImg.setValue([Lab.base.str2URL(draw.svg(), 'image/svg+xml;charset=utf-8')])\n}\n\nfunction drawSvg (addTo, baseData, features) {\n  let draw = SVG()\n  if (addTo) draw.addTo(addTo)\n  // const clickAddImg = function() {\n  //     console.log(this)\n  //     myCanvas.addImg(this.node)\n  // }\n  // draw.on('click', clickAddImg);\n\n  draw.svg(baseData)\n  let parent = draw.children()[0]\n  let styles = parent.attr()\n  draw.width(styles.width)\n  draw.height(styles.height)\n  draw.viewbox(styles.viewBox)\n  // window.draw=draw;\n  // 更改组件\n  let id = ''\n  for (const r of features) {\n    // 组件svg\n    let element = window.keysList[r.key][r.index]\n    draw.findOne('#' + r.key).svg(element.svg, true)\n    // 拼id\n    id = id + '_' + element.id\n    // TODO 調整圖層順序\n    console.log(element.zIndex)\n  }\n  id = Lab.base.md5(id)\n  draw.attr('data-id', id)\n  return draw.svg()\n}\n\nfunction createDownloadPannel () {\n  let m = Lab.ui.createModel('下载')\n\n  let runBtn = Lab.ui.createButton('下载svg图', () => {\n    // console.log(size)\n    if (window.downloadURL) {\n      let s = SVG()\n      s.svg(window.currentSvg)\n      let id = s.children()[0].attr('data-id')\n      Lab.ui.createDownlad(window.downloadURL, id)\n      downloadPannel.hide()\n    }\n  })\n  m.add(runBtn)\n  let downloadPngBtn = Lab.ui.createButton('下载png图片', () => {\n    // console.log(size)\n    let s = SVG()\n    s.svg(window.currentSvg)\n    let id = s.children()[0].attr('data-id')\n    // TODO bug\n    for (const obj of myCanvas.getObjects()) {\n      if (obj.name === 'svg') Lab.ui.createDownlad(obj.toDataURL(), id)\n    }\n    downloadPannel.hide()\n  })\n  m.add(downloadPngBtn)\n  let copyPngBtn = Lab.ui.createButton('拷贝png图片', () => {\n    // console.log(size)\n    for (const obj of myCanvas.getObjects()) {\n      if (obj.name === 'svg') Lab.clipboard.write(obj.toDataURL(), 'base64')\n    }\n    downloadPannel.hide()\n  })\n  m.add(copyPngBtn)\n  return m\n}\n\n// 图片集\nfunction createCard (row) {\n  let id = new Date().getTime() + '' + parseInt(Math.random() * 1000)\n\n  let card = Lab.ui.createGroup('card')\n  card.style.width = 'min-content'\n  card.style.margin = '12px'\n  card.addEventListener('click', e => {\n    setActiveObject(id)\n    toolbox.update()\n  })\n  card.id = id\n  row.add(card)\n\n  let text = `图片集 ${1 + Object.keys(cardElements).length}`\n  let t = Lab.ui.createBaseText(text)\n  card.add(t)\n  t.style.margin = '1em'\n\n  // img\n  let imgBtn = Lab.ui.createInput(\n    'imgs',\n    text,\n    imgs => {\n      Lab.ui.loading(0)\n      console.log(id, imgs)\n      if (cardElements[id]) cardElements[id].imgUrls = imgs\n      setTimeout(() => Lab.ui.loading(100), 3000)\n    },\n    true,\n    false\n  )\n  card.add(imgBtn)\n\n  // btns 功能区\n  let btnsDiv = Lab.ui.createGroup('column')\n  btnsDiv.style.display = 'flex'\n  let downloadBtn = Lab.ui.createIcon('download', () => {\n    //  console.log(imgBtn.getValue())\n    window.downloadURL = imgBtn.getValue()\n    if (downloadPannel) downloadPannel.show()\n  })\n  btnsDiv.add(downloadBtn)\n\n  card.add(btnsDiv)\n\n  // 占位框\n  let rect = myCanvas.addRect(\n    {\n      left: parseInt(_CANVAS_WIDTH / 2) - 100,\n      top: parseInt(_CANVAS_HEIGHT / 2) - 100,\n      width: 100,\n      height: 100,\n      // stroke: 'red',\n      strokeWidth: 0,\n      fill: 'rgba(255,0,0,0.1)'\n    },\n    true,\n    true,\n    true\n  )\n  // myCanvas.zoomToFitCanvas()\n  rect.name = 'artboard'\n  rect.id = id\n\n  // 选项框\n  let ins = Lab.ui.createInput(\n    'select',\n    '',\n    e => {\n      console.log(e, rect, imgBtn)\n      if (e === 'img') {\n        window.rect = rect\n        window.imgBtn = imgBtn\n      }\n    },\n    true,\n    false\n  )\n  ins.appendOptions([\n    {\n      value: 'img',\n      text: '图片'\n    },\n    {\n      value: 'emoji',\n      text: '表情'\n    },\n    {\n      value: 'color',\n      text: '色块'\n    }\n  ])\n  card.add(ins)\n  ins.init()\n  ins.style.marginLeft = '12px'\n  card.setValue = imgBtn.setValue\n  return { card, rect }\n}\n\nfunction createToolbox () {\n  let inPos = Lab.ui.createInputForPosition(pos => {\n    // console.log(pos)\n    let [x, y, w, h] = pos\n\n    let rect = myCanvas.getActiveObject()\n    rect.scaleToWidth(w)\n    rect.scaleToHeight(h)\n\n    rect.left = x\n    rect.top = y\n    // console.log(z);\n\n    rect.width = w / rect.scaleX\n    rect.height = h / rect.scaleX\n\n    myCanvas.render()\n  })\n  inPos.update = () => {\n    let rect = myCanvas.getActiveObject()\n    inPos.setValue([\n      rect.left,\n      rect.top,\n      rect.getScaledWidth(),\n      rect.getScaledHeight()\n    ])\n    updateCanvasImgs(rect.id)\n  }\n  return inPos\n}\n\nfunction doModified (e, data) {\n  // console.log(e, data)\n  // e.target.id;\n  if (e.target.id && cardElements[e.target.id]) {\n    toolbox.update()\n  }\n}\n\nfunction doClick (e) {\n  // console.log(e.target.id)\n  if (e.target && e.target.id && cardElements[e.target.id]) {\n    let card = cardElements[e.target.id]\n    // console.log(card, e.target.id)\n    card.element.classList.add('red')\n    // 更新rect信息到toolbox\n    toolbox.update()\n  } else {\n    for (const id in cardElements) {\n      cardElements[id].element.classList.remove('red')\n    }\n  }\n}\n\nfunction doRemoved (e) {\n  if (e.target.id && cardElements[e.target.id]) {\n    cardElements[e.target.id].element.remove()\n    delete cardElements[e.target.id]\n  }\n}\n\n// 激活\nfunction setActiveObject (id) {\n  for (const id in cardElements) {\n    cardElements[id].element.classList.remove('red')\n  }\n  if (cardElements[id]) {\n    let c = cardElements[id]\n    myCanvas.setActiveObject(c.rect)\n    c.element.classList.add('red')\n  }\n}\n\nfunction travel (children = []) {\n  // let isDone = true;\n  let list = []\n  for (let c of children) {\n    // console.log(c.node.id);\n    // if (doFun) doFun(c)\n    // if (c.children().length > 0) {\n    //     isDone = false;\n    //     travel(c.children(), doFun, successFun);\n    // };\n    list.push(c)\n    if (c.children().length > 0) {\n      list = [...list, ...travel(c.children())]\n    }\n  }\n  return list\n  // bug\n  // console.log(isDone)\n  // if (successFun && isDone) {\n  //     successFun();\n  // }\n}\n\n// step 1 打开所有的模版\n// step 2 设定变量，预处理，提取变量对应的svg\n// step 3 导出数据\n\n// 得到变量，用-M标记的变量\nfunction getAllMaskKeys (draw) {\n  let maskKeys = []\n  let children = travel(draw.children())\n  // console.log(children)\n  // 遍历过程中的数据处理\n  for (const child of children) {\n    if (\n      child.node.id &&\n      child.node.id.trim() &&\n      child.node.id.match('-M') &&\n      !maskKeys.includes(child.node.id)\n    ) {\n      maskKeys.push(child.node.id)\n    }\n  }\n  // 成功遍历完成\n  return maskKeys\n}\n\n// 初始化\n// keyList=['face','eyes','mouse','ears']\n// window.face=[];\n// window.eyes=[];\n// window.mouse=[];\n// window.ears=[];\nfunction initEngine (draw, keys = []) {\n  // 文件名\n  let basename = Lab.base.getBaseName(draw.__filepath)\n  let children = travel(draw.children())\n  for (const child of children) {\n    // 遍历过程中的数据处理\n\n    if (keys.includes(child.node.id) && window.keysList[child.node.id]) {\n      let id = Lab.base.md5(basename)\n      //  寫上id\n      child.attr('data-id', id)\n      child.attr('data-basename', basename)\n      let svg = child.svg()\n      let isNew = true\n      for (const n of window.keysList[child.node.id]) {\n        if (n.id === id) isNew = false\n      }\n      if (isNew) {\n        window.keysList[child.node.id].push({\n          id,\n          svg,\n          basename,\n          draw,\n          zIndex: keys.indexOf(child.node.id)\n        })\n        let index = window.keysList[child.node.id].length - 1\n        draw.node.addEventListener('click', e => {\n          window.keysList[child.node.id][index].draw.node.style.opacity += 0.05\n          window.keysList[child.node.id][index].zIndex++\n          if (window.keysList[child.node.id][index].draw.node.style.opacity > 1)\n            window.keysList[child.node.id][index].zIndex = 0\n          console.log(window.keysList[child.node.id][index])\n        })\n      }\n    }\n  }\n}\n\n// 笛卡尔生成全集\nfunction createAll () {\n  let data = []\n  for (const key in window.keysList) {\n    data.push(\n      Array.from(window.keysList[key], (d, i) => {\n        return {\n          key: key,\n          index: i\n        }\n      })\n    )\n  }\n  let ds = Lab.base.cartesian(data)\n  // ds=Lab.base.chunk(ds,6);\n  return ds\n}\n\n// 笛卡尔积太大，改用随机生成，重复一定的数量\nfunction createAllRandom (count = 100) {\n  let data = []\n  for (const key in window.keysList) {\n    data.push(\n      Array.from(window.keysList[key], (d, i) => {\n        return {\n          key: key,\n          index: i\n        }\n      })\n    )\n  }\n  let ds = []\n  let dsMap = {}\n  for (let index = 0; index < count * 2; index++) {\n    let style = []\n    for (const d of data) {\n      let s = Lab.base.shuffle([...d])[0]\n      style.push(s)\n    }\n    let id = Lab.base.hash(style)\n    if (!dsMap[id]) {\n      ds.push(style)\n      dsMap[id] = 1\n    }\n  }\n  ds = Lab.base.shuffle([...ds]).slice(0, count)\n  return ds\n}\n",
  "code_length": 189,
  "size": [
    883,
    681
  ],
  "extname": "designlabplugin",
  "version": "0.7",
  "package_version": "0.1.2",
  "package_id": "df22ad54c8e3dee49e71dd4ce9538ee33b2a7d1e",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@kilokilo/three-bmfont-text": "^3.1.0",
    "@mediapipe/camera_utils": "^0.3.1632432234",
    "@mediapipe/drawing_utils": "^0.3.1620248257",
    "@mediapipe/holistic": "^0.5.1635989137",
    "@node-rs/jieba": "^1.3.1",
    "@paddlejs-models/humanseg": "0.0.5",
    "@pixiv/three-vrm": "^0.6.7",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "about-window": "^1.14.0",
    "animejs": "^3.2.1",
    "color": "^3.1.3",
    "dat.gui": "^0.7.7",
    "debounce": "^1.2.1",
    "electron-json-storage": "^4.4.0",
    "electron-squirrel-startup": "^1.0.0",
    "emoji-picker-element": "^1.6.0",
    "emoji-regex": "^9.2.2",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "face-api.js": "^0.22.2",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "horajs": "^0.1.3",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "kalidokit": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "osc-js": "^2.1.2",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "pixelit": "https://github.com/giventofly/pixelit.git",
    "recordrtc": "^5.6.2",
    "regl": "^2.1.0",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "three": "^0.134.0",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1640252355547
}