{
  "poster": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAACGCAYAAAAW/E67AAAOkUlEQVR4nO2c228cR3aHv66+THfPhRwOryZWlGRZthEb8AbRwgmyL87behfIqxH4f8tz/JDEL5t4gSgwEBubNWxDsdeUAFv0hbYo3uc+011VeejpZg855kq2JIvl+gCB1LCnurp+XafOOXVxtNaaElprHMeh2+0ShiGe55X/zP7+Pnfu3KFerxPHMVprpJTMzc3RarUYjUbs7u6ysLCA7/scHh7iOA7D4ZCNjQ0cxwEofpqAUgrHcdje3sZxHDzPw3Vd0jTFdV1ONfEjRWtNt9tlfX2dSqUCTLftlHp5RT///HNu3rxJq9UiDEPSNKXX63Hp0iVarRZvvfUWr7zyCmEYcv/+fV544QWEENRqNT744APW1tbQWnN0dMRgMGBhYQEhBL7vs76+XrxEppA/S6VS4datW/i+z3PPPce7776L4zhcuXKFGzduPNb759rlP3O8WRdLKanVasVbuL6+zieffMLBwQFSSl599VWiKEIIwcsvv0ytVmN9fZ2DgwOuXbuG1pogCJibm6Pb7RJFEUqp4g0zlfylVkoBmbUbDoc0m83i74/jxT7PQjjfZ6JnoZRiNBoRRRH9fp8oigDo9/vEcXxu5fNyTeu9cGL5dnZ26Pf7JElCtVql1+shhCAMQ1qt1iN/9ly6g4MDFhcXCcMQmDbRUwKfFqGsvdYaIUTxQPnvp29WfojydafLvegil58lb5utrS3a7TZRFDEcDomiCK01aZrS7/fPtOmjQEqJ53m89NJL+L5ffJ7f64yJLj9AmXLlzqtoWbjyS1B+AS46s55Ba00cx/T7fYbDIdeuXePDDz+kUqnQbDZ58cUXH1t9dnd3SdOUIAgKa5LXcUpgEz3cR03Z+uS/5/93XZetrS2EELTbbf7lrbfY2Njg2atXuXz5ctb4QvCoWldrDY5DmqZoQGk1VR+Y4WRZzue0JUuShPF4jBACpRSe59FsNomiiDffeAOlFKsrq7iui+u6j6VOoecTuh7CESgpGYxGJ531tJNlOZ98zM0bsNPpFOJprQnDMGvk4ZDb324jtUbKlGScZC8Hj7C59Ul91tbWEK4gwmGhVi/qZ3vwDyA3g/l4F4YhrusyGg5J0wTP85Fa8893PmU3GeEL97EOe0IIxHdf0hmP+KdrL/KPyytIrVBpagV+WMqec/4Psp6ktCYfYR0gqAQEAjxHnFPij0dP6iVcD0eISb1Aq3O8aMv5lB3S/J/rugghiv/7QEWD50xEeEx10YAAUsCd1EkAuK4dgx+W07mBTqeD7/uISc8Bitx7bzzG9Tzg5PNHXyHQaBwclNY4UtKo1Yr6WIEfkrJZdhyH8XhMr9dDSllc4zgOlUqFer3+xOuXjBM63U5RHyvwD+D7Eh2ns3SlFOFjdbL05B44TjEMFDG6FfjhOJ1mLffmWdfNSvs+amaVb+PgH8HDiHY6MfKk6/N4/XdDeZgJk8ct7l+qj+3BhmN7sOFYgQ3HCmw4VmDDmcpF/9iY7UmEBJaH45H2YBPWWpnGIw+TrMhPFzNN9Gg0pt1p4+Bkc1yTGYtizmvySjhiIuTk8/m5uWJlgxX56WCmwINBn6Oj42yqa/KZ53nFKoZ8KipJ0kJwpSRRGFKtVs+srrf8dHzvqkrXdXEnk9dJkvDt9japlFSrVTqdDkHgs7q6Vvruw6XwLE+Gc52sfEH30dERf/rgT+zt7rKzs8N77/0PH330MUqpqflRsN7z08YDLdnRWrO6skq9UQcN169fJ4oiXNdFKUl5MYpNbT9dnBsH52Nus9mkWq2SpimVIOBKcLXYYAXO1EK0vJzT2J790zBzDBbCPdmOODHTURxn636UAjSu6xbLQrTWk+uF3R3xlHGmBwMMh0OGwwG+5+N5HtpxSNMEJRW+7yOlJEkT8gUimqzn7+/v0W5nf3cch5WVlanNZ5Ynz8z9waPRkOeuPYvjCN5//32azSbPPPMMtVqNr7/+mnq9zurq6hmPWUpZrPTf398nSRIqlYr1rH9CzpjofJfcrVv/x6efflr06vfee4+vvvqK4XDIm2++eUbg3KS//fbbHB4e8sYbb5xZYvq08HMK56ZSleWNzIPBgM3NTVzX5cqVK4RhyNbWFnEcs77+DK3WYhZGOVm2K1vUl8XMSik6nQ7NZtP4Xf1PO2cEFkKwt7fPzs5OccjKOBmjtcb3fbTSjJMEJeVEWD1JaWYpLeEIlFa4rsvi4iJO7mVP8pnZVdl3Jj536RrQShHHEZ7n0e50Msdt8p3Cu+dkE1dezlRfdKbXQhX30ppGo04QBD+bHjzTRAeBTxTH2TpbxyGKYjzPzxpOKeqeV4RJwnVRUiKlQojsfI98K2WSpMUO9yAIkFJmvd510epkL2uapplH7jgoKbPrK8FUulQIUZz4Uz45oByaaa2zvTmTbZxAYVFwHGSa4nruz1fgPHOVZ6hEOVX57bck4zFRHHN8dMR8szlxqtrU6w3m5hoM+gMac3OMx2PCMOTu3S9wXY/FxUXu3LlDo9EgCkOOjo8Iw4g0TRkOhywvLzE/n5XnlPb3lNOlo9GI7W++QSlFvdGg2+2glSaKY5RSBEGAKwSj0Yi4WuX+/fugNc+srxOGYfYiuCe7/H4O4sI5uejyrvWDg33+8Id3kKnkhRdf4PbmbdbW1sCBzc8+429u3CCKIr7c+pIbv/oV/33zJq+99ho3/+smvu/z97/+Nf/7xz9y/fnrdDodtu7e5a9eeontb7bZ2bnHa6/9A63WYrZT/ZQzpnUWc7fbbd555z+p1essLCzw2Z//TKu1SBhW2NvbZ2Njg8Zcg93dXeI45qsvv8JxHH7z+uusr68zHo+fUJM+XTxQqtJxBIEfgK8Jggp+4OMIh2q1xsrqKkmSUK83uPrsVXq9Hq4r+OKLL6jXawRBwGg0pNFooKSiXq9TrdVIk5T55jyj8eiBNkU7jkOrtYiUkjAMWVhoUW80sntUKlSrVdrtdjHztbS0RH/Qhwco22RmnrJzdHTE/sEh7sSkJUlCr9dDKUUcx4zH48nYmSBlltmam5tHCEEqU3zPZzweMxqNSNM0O3VmMMD1PIIgYJCfOAOkaUocx9Tr9WJoiMIQP/A5Pm5PnRTX6XQKTz8/cMTzvOy+k3H++Pi4ON9LSsn8/DyVSgWl1CTtOs/83NwPHoMvmmmfKfDx8XEhcP5Zdr6Eg1LyZGtiyZTnDlQ5xhRCgOOgJ05R3sie55W8XIFSssh+SSmpVasEQcD+wUHxkgHF2AwnId20k8XEudJT9cqvTdOUpcUWjUbjSbXvT85MEx0ElTMbp5IkAU5OwjtN+eSZ/OfJhETmzcZRhB8EmSnNvjTzaKZUSkjGU57y6fJObwCrVqtopej1+2c87LxsIQTD0Yj08BAmcXseshXXO6WyJ9fU67ULm3KdKfB4PCoaJBfZ9/1C3Lwn5Q2eh0Jl8t5dvCSA67mElYCjUi8WQkyZ4aBSQUnJcCizuLtkDfJenpvkvGdKKfFcF5nvpC8J6k1Cuvx7o9GYwXCEA9mG6Ul9s97vFs+S10epLP8ex9GFDK1mCpz3mPyB0jQtDtuq1WoMBgOklERRCBrciVOTjaFZzkNKSZIkUy+JUgpZMq152UdHR8XxB4cHBwSVSjFuep6HlJJ+v0e1WkNKyaDfp7W4WJyBmZd92mwrpdje3qZeqzFOErqdDlEUZRMmk7Mz0zQthqDDgwM832dpaak48ih/US+asDkzBS4/kBCCfr/Hf/z+9/iBz8rKCrc3N6k3GlSrVQ4PDlhdXeMXl37BaDiiWqvi+z7fffcd1bjKq3/7dwwG/WJtV7mhshDsgI8//ojhcEglqLC5+RmXLm0glWR/f5/LG5cZjUbcu3ePa9eucffuXfr9Hr/93e+4evVZRqPRdJ0nZtbzfPb29vj3f/tXfvnLv6bX73Hr1i2ev/48x+1jet0uz11/HseBw8NDoijizu3bLC8v85vXf0scxzOHoovGA4VJSmnq9awXeJ5HFMWEYUitVsMhW115794OaM3m5mfU63UcR+D7AVqrmWXmPThJEu7v3KfZbKK1ZnFxCddzifyoMI+u5xJUAnAgjqOJqT45E+MsThE/12p1+v0+ruuy0FzA8z1qtTpBUAGt2d3dK2a8FpeWsizbUzQx8mP5i150zuHhIWmS4AhBpVJBymyMdF23OF3VdV2++eZrarU6y8vLDAaDwjmRSlGrxkRRxO7uXlG2Uop+v0+v18PzPEaTU9rm5uYK06u1ZtDvo4EoiorQKs9QSSmZazSQStLt9XGFQAhBr9ul0+2ysrLC/v4+/X6fIAgmMbksxutOp43n+YzHI5TSrK6uTtVvZXk5G464eE7WzMmGo6Mjdvf2pwTOl83mEwLlZTplh8vzPJTWpKXxFzKB67UacRyxs3N/aowTE0EKxw6QE6etcNBKJ92Wx1zIxvvm/DyplHS63eLa3IFLJpYnv0furOWU7w2Zx18ex9dWV6lW45mn7D7tzOzB43FCt9udmqLJrjqZETpbUqmMfMF8iSxvHBH4Pu12Z/rv+cL60qr603c5M3tUrpvS1Gq1whpkC/Kz8ThfbXJS/+8ru3TvU2FSo1G/sGGS3eH/gFzEEAke8e5Ck7moq0BsDzaci+UxWB4aK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HCswIZjBTYcK7DhWIENxwpsOFZgw7ECG44V2HD+H2/3IN7FKF2qAAAAAElFTkSuQmCC",
  "knowledge": {
    "course": "转化的文件位于源文件目录下",
    "readme": "视频转gif",
    "author": "shadow",
    "version": "0.1.4"
  },
  "code": "\nvar width = 220, height = 200, fps = 10, startTime = 0, loop = 5;\n\nvar _FILE;\n\nvar modelType;\n\nvar videoRange;\n\nfunction gui() {\n  Lab.ui.p5Show(false);\n\n  let p = Lab.ui.createBaseText('---');\n  p.style.minHeight = '120px';\n  p.style.minWidth = '120px';\n\n  let openBtn = Lab.ui.createButton(\"打开\", async () => {\n    let v = await Lab.ui.createShortVideoInput();\n    if (v[0].type === 'video' || v[0].type === 'gif') {\n      p.innerText = '正在ing';\n\n      _FILE = { ...v[0] };\n\n      let info = await Lab.video.getMediaDurationAndType(_FILE.url);\n      p.innerText = JSON.stringify(info, null, 2);\n      _FILE = Object.assign(_FILE, info);\n\n      // 处理下duration为空的情况\n      _FILE.duration = (!_FILE.duration ? 10 : _FILE.duration);\n      // console.log(v[0],_FILE.duration==\"N/A\"?10:_FILE.duration,_FILE.duration==\"N/A\")\n\n      width = _FILE.width;\n      height = _FILE.height;\n      fps = _FILE.frame_rate || 0;\n      loop = _FILE.duration;\n\n      // iw.input.value = width;\n      // ih.input.value = height;\n      // ifps.input.value = fps;\n      // iloop.input.value = loop;\n      // istartTime.input.value = 0;\n      // iscale.input.value = 1;\n\n      if (videoRange) videoRange.remove();\n      videoRange = Lab.ui.createVideoRange(0, loop);\n      Lab.ui.add(videoRange);\n\n\n    }\n\n  }, false);\n\n\n\n\n  let inSelect = Lab.ui.createInput('select', '选择', data => {\n    modelType = parseInt(data);\n    // if (originBgImg) doImage(originBgImg);\n  }, true, false);\n  inSelect.appendOptions([{\n    text: 'none',\n    value: -1\n  }, {\n    text: 'u2net',\n    value: 0\n  }, {\n    text: 'humanseg',\n    value: 1\n  }, {\n    text: 'bodypix',\n    value: 2\n  }]);\n\n\n  let btn0 = Lab.ui.createButton(\"提取图片&是否抠图\", async () => {\n    // let v = await Lab.ui.createShortVideoInput();\n    if (_FILE.type === 'video' || _FILE.type === 'gif') {\n      p.innerText = '正在ing';\n      // let i\n\n      let info = await Lab.video.getMediaDurationAndType(_FILE.url);\n      let output = await Lab.video.videoExtract(_FILE.url, info.width + 'x' + info.height, null, 0, 0);\n\n      // info = await Lab.video.getMediaDurationAndType(output);\n      info.output = output;\n      p.innerText = JSON.stringify(info, null, 2);\n\n      // 抠图\n      // console.log(output)\n      p.innerText = 'start,共' + output.images.length;\n      let t = (new Date()).getTime();\n      await segmentImages(output.images);\n      p.innerText = 'done,耗时' + ((new Date()).getTime() - t);\n    }\n\n  }, false);\n\n  let btn = Lab.ui.createButton(\"视频转动图\", async () => {\n    // let v = await Lab.ui.createShortVideoInput();\n    if (_FILE.type === 'video' || _FILE.type === 'gif') {\n      p.innerText = '正在ing';\n      // let i\n      // \n      // width=\n      let output = await Lab.video.video2gif(_FILE.url, width, fps, startTime, loop);\n      let info = await Lab.video.getMediaDurationAndType(output);\n      p.innerText = JSON.stringify(info, null, 2);\n    }\n\n  }, false);\n\n  let btn2 = Lab.ui.createButton(\"视频转mp4\", async () => {\n    // let v = await Lab.ui.createShortVideoInput();\n    if (_FILE.type === 'video' || _FILE.type === 'gif') {\n      p.innerText = '正在ing';\n      let output = await Lab.video.video2mp4(_FILE.url, startTime, loop);\n      let info = await Lab.video.getMediaDurationAndType(output);\n      info.output = output;\n      p.innerText = JSON.stringify(info, null, 2);\n    }\n\n  }, false);\n\n\n  let btn3 = Lab.ui.createButton(\"动图转视频\", async () => {\n    // let v = await Lab.ui.createShortVideoInput();\n    // console.log(v)\n    if (_FILE.type === 'gif') {\n      p.innerText = '正在ing';\n      let output = await Lab.video.gif2video(_FILE.url);\n      let info = await Lab.video.getMediaDurationAndType(output);\n      info.output = output;\n      p.innerText = JSON.stringify(info, null, 2);\n    }\n\n  }, false);\n\n  let btn4 = Lab.ui.createButton(\"多图转动图\", async () => {\n    let v = await Lab.ui.getFilePath();\n    // console.log(v)\n    if (v && v[0]) {\n      p.innerText = '正在ing';\n      //  console.log(v)\n      let gif = new Lab.GIF();\n      await gif.addFromDir(v[0]);\n      let res = await gif.render();\n      let im=Lab.ui.createImageAndDownload(res);\n      Lab.ui.add(im);\n      im.init()\n      p.innerText = '完成';\n    }\n\n  }, false);\n  // let p=Lab.ui.createBaseText('---');\n\n  let g = Lab.ui.createGroup('container');\n  g.add(p);\n  g.add(openBtn);\n  g.add(inSelect);\n  g.add(btn0);\n  g.add(btn);\n  g.add(btn2);\n  g.add(btn3);\n  g.add(btn4);\n\n  // Lab.ui.add(g);\n\n  // let iscale = Lab.ui.createInput('text', '比例', text => {\n  //   let s = 1;\n  //   if (text && text[0]) s = parseFloat(text[0]);\n  //   width = parseInt(width * s);\n  //   height = parseInt(height * s);\n  //   iw.input.value = width;\n  //   ih.input.value = height;\n  // }, false),\n  //   iw = Lab.ui.createInput('text', '宽度', text => {\n  //     if (text && text[0]) width = parseInt(text[0]);\n  //   }, false),\n  //   ih = Lab.ui.createInput('text', '高度', text => {\n  //     if (text && text[0]) height = parseInt(text[0]);\n  //   }, false),\n  //   ifps = Lab.ui.createInput('text', '帧速率', text => {\n  //     if (text && text[0]) fps = parseInt(text[0]);\n  //   }, false),\n  //   istartTime = Lab.ui.createInput('text', '开始时间', text => {\n  //     if (text && text[0]) startTime = parseInt(text[0]);\n  //   }, false),\n  //   iloop = Lab.ui.createInput('text', '终止时间', text => {\n  //     if (text && text[0]) loop = parseInt(text[0]);\n  //   }, false);\n\n  // let gn = Lab.ui.createGroup(iscale, iw, ih, ifps, istartTime, iloop);\n  // gn.style.minWidth = '200px';\n  // gn.style.padding = '12px';\n\n  let gAll = Lab.ui.createGroup('container');\n  gAll.add(g);\n  Lab.ui.add(gAll);\n\n}\n\n// 抠图\nasync function segmentImages(urls) {\n  let seg;\n  if (modelType === 0) {\n    seg = Lab.ai.u2net.segment;\n  } else if (modelType === 1) {\n    seg = Lab.ai.humanseg.start;\n  } else if (modelType === 2) {\n    seg = Lab.ai.bodypix.segmentPerson;\n  };\n  if (!seg) return;\n  for (let imUrl of urls) {\n    let imUrlInfo = await Lab.video.getMediaDurationAndType(imUrl);\n    if (imUrlInfo && imUrlInfo.type === 'img') {\n      let img = await Lab.ui.createImage(imUrl);\n      let res = await seg(img);\n      Lab.base.saveBase64(res.src, imUrl);\n      // console.log(imUrl, res);\n    }\n  };\n}",
  "code_length": 38,
  "size": [
    609,
    703
  ],
  "extname": "designlabplugin",
  "version": "0.1.4",
  "package_version": "0.1.2",
  "package_id": "aa265fef6f33eca5d2d189a79fa3c427e259c91e",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@node-rs/jieba": "^1.2.0",
    "@paddlejs-models/humanseg": "0.0.5",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "@tensorflow/tfjs-converter": "^2.8.6",
    "@tensorflow/tfjs-node": "^3.3.0",
    "about-window": "^1.14.0",
    "blockly": "^4.20201217.0",
    "color": "^3.1.3",
    "colorthief": "^2.3.2",
    "electron-json-storage": "^4.4.0",
    "escodegen": "^2.0.0",
    "espree": "^7.3.1",
    "estraverse": "^5.2.0",
    "exceljs": "^4.2.1",
    "fabric": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "leader-line": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "monaco-editor": "^0.21.3",
    "muuri": "^0.9.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "p5": "^1.3.1",
    "p5.createloop": "^0.2.8",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "recordrtc": "^5.6.2",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "spatial-db": "0.0.25",
    "sweetalert2": "^10.15.7",
    "timeago.js": "^4.0.2",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1624606291709
}