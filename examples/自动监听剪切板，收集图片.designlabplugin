{
  "poster": "data:image/png;base64,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",
  "knowledge": {
    "course": "",
    "readme": "自动监听剪切板，收集图片",
    "author": "shadow",
    "version": "0.2.1"
  },
  "code": "// 所有图片\nlet imagesDict = {};\n\nvar _COLOR_NUM = 120, _BG_COLOR = '#eeeeee';\n\nvar imgsDiv, gridSpace;\n\nvar colorsAll = [];\n\nfunction gui() {\n    //隐藏p5的画布\n    Lab.ui.p5Show(false);\n\n    let mainDiv = Lab.ui.createGroup('container');\n    mainDiv.style='width: 100%;';\n    Lab.ui.add(mainDiv);\n\n    let btns = Lab.ui.createGroup('column');\n    btns.style = `margin: 24px;\n    display: flex;\n    justify-content: space-between;`;\n    mainDiv.add(btns);\n\n  \n    let clearBtn = Lab.ui.createIcon('clear', () => {\n        // 清空缓存\n        Lab.clipboard.clearStore('img');\n        for (let id in imagesDict) {\n            imagesDict[id].remove();\n        };\n        colorsAll = [];\n    }, false);\n    btns.add(clearBtn);\n\n    let inputColorNum = Lab.ui.createInput('text', '颜色数量', e => {\n        if (e & e[0]) {\n            _COLOR_NUM = Math.max(parseInt(e[0]), 2);\n            run();\n        };\n    });\n    inputColorNum.style = `margin: 24px;`;\n    mainDiv.add(inputColorNum);\n\n    imgsDiv = Lab.ui.createGroup('column');\n    mainDiv.add(imgsDiv);\n \n    // 监听剪切板\n    Lab.clipboard.listener('img', async (url) => {\n        // console.log(nativeImage)\n        // let url = nativeImage.toDataURL();\n        //创建图片\n        await addImg(url);\n    });\n\n  \n};\n\n// 图片\nasync function addImg(url) {\n    let id = Lab.base.md5(url);\n    if (imagesDict[id]) return;\n    let img = await Lab.ui.createImage(url);\n    img.style.width = \"88px\";\n    img.style.margin = \"8px\";\n    img.id = id;\n    let card = Lab.ui.createGroup('card');\n    card.style = `display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin: 4px;\n    background: #eee;\n    padding: 24px;`;\n    let colors = await imgProcess(img);\n    card.add(img);\n    if (colors) card.add(colors);\n    imgsDiv.add(card);\n    imagesDict[id] = card;\n};\n\nfunction run() {\n    imgsDiv.innerHTML = '';\n    imagesDict = {};\n    // 获取缓存\n    Lab.clipboard.getAllStore('img').then(async json => {\n        for (let id in json) {\n            let base64 = json[id];\n            await addImg(base64);\n        }\n    });\n};\n\n\nfunction sortColor(mainColor, palette = []) {\n    let distance = Lab.ML.distanceMatrix([(new Lab.Color(mainColor).hsl()).color, ...Array.from(palette, p => (new Lab.Color(p).hsl()).color)], Lab.ML.Distance.euclidean);\n\n    distance = Array.from(distance[0].slice(1, distance[0].length), (d, index) => {\n        return {\n            score: d,\n            color: palette[index]\n        }\n    }).sort((b, a) => b.score - a.score);\n    distance = Array.from(distance, d => d.color);\n    //    console.log(mainColor,distance);\n    let colors = Array.from([mainColor, ...distance], c => (new Lab.Color(c)).hex());\n    return colors;\n}\n\n\nasync function imgProcess(img) {\n    let color = new Lab.Color();\n    // console.log(img)\n    let mainColor = await color.getColor(img);\n    let palette = await color.getPalette(img, _COLOR_NUM);\n    // console.log(mainColor, palette)\n    if (!(mainColor && palette)) return;\n    let colors = sortColor(mainColor, palette);\n    let div = Lab.ui.createGroup('column');\n    div.style = `display: flex;\n    flex-wrap: wrap;`;\n    div.innerHTML = Array.from(colors, (t, index) => {\n        if (!colorsAll.includes(t)) colorsAll.push(t);\n        return `<div style='margin:${index == 0 ? 0 : 0}px;background-color:${t};width:22px;height:22px'></div>`\n    }).join('');\n    // console.log(palette)\n    Array.from(div.children, c => {\n        c.addEventListener('click', async e => {\n            _BG_COLOR = e.target.style.backgroundColor;\n            Lab.clipboard.write(_BG_COLOR, 'text');\n        });\n    });\n    return div;\n}\n\n",
  "code_length": 55,
  "size": [
    419,
    798
  ],
  "extname": "designlabplugin",
  "version": "0.2.1",
  "package_version": "0.1.2",
  "package_id": "bfc8f1f2a4f217b09e2e89b28c1899dd23488b6b",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@node-rs/jieba": "^1.2.0",
    "@paddlejs-models/humanseg": "0.0.5",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "@tensorflow/tfjs-converter": "^2.8.6",
    "@tensorflow/tfjs-node": "^3.3.0",
    "about-window": "^1.14.0",
    "aframe": "^1.2.0",
    "blockly": "^4.20201217.0",
    "color": "^3.1.3",
    "colorthief": "^2.3.2",
    "electron-json-storage": "^4.4.0",
    "emoji-picker-element": "^1.6.0",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "fabric": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "leader-line": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "monaco-editor": "^0.21.3",
    "muuri": "^0.9.3",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "p5": "^1.3.1",
    "p5.createloop": "^0.2.8",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "recordrtc": "^5.6.2",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "spatial-db": "0.0.25",
    "sweetalert2": "^10.15.7",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1626428104229
}