{
  "poster": "data:image/png;base64,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",
  "knowledge": {
    "course": "",
    "readme": "指南生成",
    "author": "shadow",
    "version": "0.3.0"
  },
  "code": "// 缓存key\nvar _STORE_KEY = 'mix-book';\n\nvar dataset = {};\nvar db = new Lab.Store(_STORE_KEY);\n\n// 默认的图谱label\nvar _GRAPHE_LABEL = -1;\nvar _GRAPHE_LAYOUT = 'circular';\nvar _GRAPHE_COLORS = [\"#003366\", \"#006699\", \"#4cabce\", \"#e5323e\"];\n// 按推荐还是来源归类\nvar _GRAPHE_C_BY_L = true;\n\n// 配色方案\nvar colors = {\n    font: '#a76a4d',\n    background: '#fff8ee',\n    highlight: ['#fcf1d7', '#ffc038']\n};\n\n\nvar mainDiv, cards, tag, selectModel, myChart;\n\nfunction gui() {\n    Lab.ui.p5Show(false);\n\n    // 加载echart库\n    loadEcharts();\n\n    mainDiv = Lab.ui.createGroup('container');\n    Lab.ui.add(mainDiv);\n\n    // 根据url获取文章\n    let spiderBtn = Lab.ui.createButton('粘贴', pasteAndSpider, false);\n    mainDiv.add(spiderBtn);\n\n    // 按照推荐关系获取更多\n    let moreBtn = Lab.ui.createButton('相关推荐', moreRelate, false);\n    mainDiv.add(moreBtn);\n\n    // 生成文章 模态框\n    selectModel = Lab.ui.createModel(\"\");\n    Lab.ui.add(selectModel);\n\n    let allSelectBtn = Lab.ui.createButton('全部取消/增加', toggleSelectForCreate, false);\n    selectModel.add(allSelectBtn, 'header');\n\n    let nextBtn = Lab.ui.createButton('下一步', nextForCreate, false);\n    selectModel.add(nextBtn, 'header');\n\n    let runBtn = Lab.ui.createButton('生成', runForCreate, false);\n    selectModel.add(runBtn, 'header');\n\n\n    // 设置图谱的颜色\n    let colorsSetBtn = Lab.ui.createButton('颜色设置', setColorsForGraph, false);\n    mainDiv.add(colorsSetBtn);\n\n    // 重设图谱颜色\n    let colorsResetBtn = Lab.ui.createButton('颜色重设', resetColorsForGraph, false);\n    mainDiv.add(colorsResetBtn);\n\n    // 生成图谱\n    let copyGraphBtn = Lab.ui.createButton('生成图谱', runCreateGraph, false);\n    mainDiv.add(copyGraphBtn);\n\n    // 清空数据\n    let clearBtn = Lab.ui.createButton('清空', clearDataset, false);\n    mainDiv.add(clearBtn);\n\n    // 选择后生成\n    let selectBtn = Lab.ui.createButton('选择后生成', selectForCreate, false);\n    mainDiv.add(selectBtn);\n\n    cards = Lab.ui.createGroup('column');\n    cards.style.width = '320px';\n    mainDiv.add(cards);\n\n    // 加载缓存\n    initDatasetFromStore();\n\n};\n\nfunction initDatasetFromStore() {\n    db.get('dataset').then(r => {\n        if (r) dataset = r;\n        tag = Lab.ui.createTag(`收集 ${Object.keys(dataset).length}`);\n        tag.style = `\n        position:fixed;\n        top:12px;\n        right:12px;`\n        mainDiv.add(tag);\n        tag.addEventListener('click', async() => {\n            if (Object.keys(dataset).length > 0) {\n                Lab.ui.saveJsonDialog(dataset, '下载数据')\n            } else {\n                let json = Lab.ui.openJsonDialog();\n                if (Object.keys(json).length > 0) {\n                    dataset = json;\n                    db.set('dataset', dataset);\n                    tag.innerText = `收集 ${Object.keys(dataset).length}`;\n                }\n\n            };\n            // let tagModel=Lab.ui.createModel();\n            // let downloadBtn = Lab.ui.createButton('下载数据', () => {\n            //     dataset = {};\n            //     db.set('dataset', {});\n            //     cards.innerHTML = '';\n            //     tag.innerText = `收集 ${Object.keys(dataset).length}`;\n            // }, false);\n            // mainDiv.add(downloadBtn);\n        });\n    });\n    db.get('_GRAPHE_COLORS').then(r => {\n        if (r) _GRAPHE_COLORS = r;\n    });\n}\n\n\nfunction loadEcharts() {\n    let script = document.createElement('script');\n    script.type = \"text/javascript\";\n    script.src = \"https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js\";\n    Lab.ui.add(script);\n}\n\nfunction pasteAndSpider() {\n    let url = Lab.clipboard.read();\n    if (url.match('https')) {\n        spider(url, 0);\n    }\n}\n\n\nfunction spider(url, mainIndex = 0) {\n    let webview = Lab.ui.createWebview(url, false);\n    webview.style = `\n            display:inline-flex;\n            width:1020px;\n            height:2800px;\n            `;\n    mainDiv.add(webview);\n    if (typeof(mainIndex) == 'number') webview.setAttribute('main-index', mainIndex);\n    // console.log(webview.getAttribute('main-index'))\n    // webview.addEventListener('page-title-updated', doData);\n    // webview.addEventListener('dom-ready', console.log);\n    // webview.addEventListener('load-commit', console.log);\n    webview.addEventListener('did-finish-load', doData);\n    // webview.addEventListener('did-frame-finish-load', console.log);\n    // webview.addEventListener('console-message', console.log);\n    // webview.addEventListener('update-target-url', doData);\n\n}\n\n// 扩充一层相关推荐\nfunction moreRelate() {\n    for (const id in dataset) {\n        let d = dataset[id];\n        if (!d.isMore) {\n            for (const r of d.relate) {\n                spider(r.url, d.mainIndex + 1);\n            };\n            d.isMore = true;\n        }\n    }\n};\n\n// \nfunction toggleSelectForCreate() {\n    let labels = Array.from(selectModel.querySelectorAll('.label'), d => d);\n    if (Array.from(labels, b => b.classList.contains('red')).filter(f => f).length > 0) {\n        Array.from(labels, r => r.classList.remove('red'));\n    } else {\n        Array.from(labels, r => r.classList.add('red'));\n    }\n}\n\nfunction nextForCreate() {\n    let ids = Array.from(selectModel.querySelectorAll('.label.red'), d => d.getAttribute('data-id'));\n    let datas = [];\n    for (let id in dataset) {\n        if (ids.includes(id)) datas.push(dataset[id]);\n    };\n    datas = datas.sort((a, b) => b.mainIndex);\n    checkImgForCreate(datas);\n}\n\nasync function runForCreate() {\n    selectModel.hide();\n    Lab.ui.loading(0);\n    let selectRes = Array.from(selectModel.querySelectorAll('img'), im => {\n        return { url: im.src, id: im.getAttribute('data-id'), type: im.getAttribute('data-type') }\n    })\n    let imgs = {};\n    Array.from(selectRes, im => {\n        if (!imgs[im.id]) imgs[im.id] = [];\n        imgs[im.id].push({ url: im.url, type: im.type })\n    });\n\n    for (let id in imgs) {\n        let data = {...dataset[id] };\n        data.imgs = imgs[id];\n        imgs[id] = data;\n    };\n\n    cards.innerHTML = '';\n    await createCard(imgs);\n    // Lab.clipboard.write(cards.innerHTML,'html');\n    setTimeout(() => Lab.ui.loading(100), 500);\n}\n\n// 生成之前 审核图片\nfunction checkImgForCreate(datas) {\n    selectModel.querySelector('.content').innerHTML = '';\n    for (const data of datas) {\n        let d = {...data };\n        let card = Lab.ui.createGroup('card');\n        let title = Lab.ui.createBaseText(d.title);\n        title.style.fontSize = '2em';\n        card.add(title);\n        d.imgs = [{ url: d.image }, ...d.imgs];\n        // let mImg = await Lab.ui.createImage(d.image);\n        // mImg.setAttribute('data-id', d.id);\n        // card.add(mImg);\n        d.imgs = Array.from(d.imgs, im => im = {...im, score: im.type == 'gif' ? 1 : 0 }).sort((a, b) => b.score - a.score);\n        // console.log(d.imgs)\n        Array.from(d.imgs, async im => {\n            let row = Lab.ui.createGroup('row');\n            row.style = `margin: 24px 0;`;\n            let img = await Lab.ui.createImage(im.url);\n            img.setAttribute('data-id', d.id);\n            img.setAttribute('data-type', im.type);\n            img.className = 'ui card';\n            img.addEventListener('mouseover', e => img.classList.add('raised'));\n            img.addEventListener('mouseout', e => img.classList.remove('raised'));\n            img.addEventListener('click', e => img.remove());\n            let text = Lab.ui.createBaseText(im.text || '');\n            row.add(img);\n            row.add(text);\n            card.add(row);\n        });\n        selectModel.add(card);\n    };\n}\n\nasync function createCard(ds) {\n    let index = 1;\n    for (const id in ds) {\n        let data = ds[id];\n        let card = Lab.ui.createGroup('card');\n        cards.add(card);\n        let htmlDiv = Lab.ui.createGroup('card');\n        card.add(htmlDiv);\n        htmlDiv.innerHTML = await createCardHtml(index, data);\n        htmlDiv.setAttribute('contenteditable', true);\n        let copyBtn = Lab.ui.createButton('拷贝', e => {\n            Lab.clipboard.write(htmlDiv.innerHTML, 'html');\n        }, false);\n        card.add(copyBtn);\n        index++;\n    }\n}\n\nasync function doData(e) {\n    // console.log(e)\n    let webview = e.target;\n    webview.zoomFactor = 0.1;\n    await Lab.base.sleep(500);\n    window.scrollTo(0, 999999999999);\n    await Lab.base.sleep(3000);\n    let code = '';\n    // 设置url的来源\n    if (webview.src.match('mp.weixin.qq.com')) {\n        code = `\n        var ks=Array.from(document.head.querySelectorAll('meta'),m=>{\n            return {property:m.getAttribute('property'),content:m.getAttribute('content')}\n        }).filter(f=>f.property==='og:title'||f.property==='og:description'||f.property==='og:image');\n        \n        var kd={\n            type:'weixin',\n            url:document.URL,\n            author:document.querySelector('#js_name').innerText.trim(),\n            text:document.querySelector('#js_content').innerText\n        };\n        Array.from(ks,k=>{\n            kd[k.property.replace('og:','')]=k.content\n        });\n\n        kd.imgs=Array.from(document.querySelectorAll('#js_content img'),img=>{\n            var obj;\n            console.log(img,img.complete)\n            if(img.parentElement.nextElementSibling){\n        \n            let tx=img.parentElement.nextElementSibling.innerText.trim();\n        \n            let dtype=img.getAttribute('data-type'),url=img.src;\n            let width=img.naturalWidth,height=img.naturalHeight;\n        \n            url.match('https')&&width!=height&&width>100?obj={url,text:tx,type:dtype,\n        width,height}:null;\n            \n            }\n            return obj;\n        }).filter(f=>f);\n\n        kd.relate=Array.from(document.querySelectorAll('.js_related_main a'),a=>{\n\n            let im=a.querySelector('.weui-media-box__ft').style.backgroundImage.replace('url(\"','').replace('\")',''),\n                title= a.querySelector('.weui_ellipsis_mod_inner').innerText,\n                author=a.querySelector('.relate_profile_nickname').innerText,\n                url=a.getAttribute('data-url');\n        \n            return{imurl:im,title,author,url};\n        });\n\n        kd;`;\n\n    } else if (webview.src.match('producthunt.com')) {\n        code = `var ks = Array.from(document.head.querySelectorAll('meta'), m => {\n            return { property: m.getAttribute('property'), content: m.getAttribute('content') }\n        }).filter(f => f.property === 'og:title' || f.property === 'og:description' || f.property === 'og:image');\n\n        var exts;\n        try{exts=JSON.parse(Array.from(document.querySelectorAll('script'),s=>s.type=='application/ld+json'?s.innerText:'').filter(f=>f)[0])[0];}catch{};\n\n        var kd = {\n            type: 'producthunt',\n            url: document.URL,\n            applicationCategory:exts?.applicationCategory,\n            exts\n        };\n        Array.from(ks, k => {\n            kd[k.property.replace('og:', '')] = k.content\n        });\n        if(exts) kd.title=exts.name;\n        // kd.image = document.querySelector('.lazyload-wrapper source').src.replace(/\\\\?.*/ig, '');\n        if(exts) kd.image=exts.image;\n\n        kd.imgs = Array.from(document.querySelectorAll('.lazyload-wrapper img'), w => {\n            return { url: w.alt }\n        }).filter(f => f.url.match('http'));\n        kd.relate = Array.from(document.querySelectorAll('a'), a => {\n            return {\n                type: a.getAttribute('data-test'),\n                url: a.href, imurl: (a.querySelector('video source') || a.querySelector('img'))?.src,\n                title: a.querySelectorAll('span')[0]?.innerText\n            }\n        }).filter(f => f.type === 'related-post');\n        kd;`;\n\n    }\n\n    let res = await webview.executeJavaScript(code);\n    console.log(res);\n    // for (const r of res) {\n    //     r.base64=await Lab.Image.getNativeImageFromWebview(r.url);\n    // };\n    if (webview.getAttribute('main-index')) res.mainIndex = ~~webview.getAttribute('main-index');\n    if (res) {\n\n        res.id = Lab.base.hash({ title: res.title, description: res.description, image: res.image });\n        // if (!dataset[res.id]) dataset[res.id] = res;\n        res.tags = extractArticalFeature(res);\n        dataset[res.id] = res;\n        // console.log(res)\n        db.set('dataset', dataset);\n        tag.innerText = `收集 ${Object.keys(dataset).length}`;\n\n        // 更新图谱\n        let data = await createGraph();\n        displayGraph(data);\n    };\n    webview.remove();\n    return res;\n}\n\nasync function createCardHtml(index, cardData) {\n    let html = '';\n    let data = {...cardData };\n\n    data.image = await getImgBase64(data.image);\n\n    if (data.type == 'weixin') html = createHead(index, data.title, data.image, data.description);\n    if (data.type == 'producthunt') html = oneImageLayout2(data.title, data.image, data.description);\n\n    let imgs = [];\n    for (const im of data.imgs) {\n        let base64 = await getImgBase64(im.url);\n        // console.log(im)\n        if (im.type === 'gif') {\n            html += await createContent([base64])\n        } else {\n            imgs.push(base64);\n        }\n    };\n    html += await createContent(imgs);\n    // card.innerHTML=html;\n    // html+=createCopyHTMLBtn();\n    return html\n};\n\n\nfunction createCopyHTMLBtn() {\n\n}\n\n\nfunction createHead(index, title, image, description) {\n\n    return `<section class=\"_design-ai-lab\" data-tools=\"mixlab无界社区\">\n    <section style=\"margin: 1em auto;\">\n        <section style=\"display: flex;align-items: center;justify-content: center;align-items: flex-end;\">\n            <section style=\"box-sizing:border-box;margin-left: 10px;width: 100%;\" data-width=\"45%\">\n                <section style=\"text-align: left;height: 2em;\">\n                    <section class=\"autonum\" style=\"box-sizing:border-box;font-size: 20px;color: #fff;text-align: center;background-image: linear-gradient(to bottom, ${colors.highlight[0]} ,${colors.highlight[1]});display: inline-block;width: 35px;height: 28px;line-height: 28px;\">\n                        <strong style='width: 100%;display: block;'>${index}</strong>\n                    </section>\n                </section>\n                <section style=\"margin-left: 10px;margin-top: -15px;\">\n                    <section data-autoskip=\"1\" class=\"mix-brush\" style=\"text-align: justify;line-height:1.75em;letter-spacing: 1.5px;font-size:14px;background: ${colors.background};padding:1.3em 1em 1em 1em;color: ${colors.font};\">\n                        <p>\n                            <strong>${title}</strong>\n                        </p>\n                        <p>${description}\n                        </p>\n                    </section>\n                    \n                </section>\n            </section>\n            \n        </section>\n    </section></section>\n`;\n}\n\n\n\n\nasync function createContent(imgs = []) {\n    if (imgs.length == 1) return oneImageLayout(imgs[0]);\n    if (imgs.length >= 3) return await threeImageLayout(imgs);\n    if (imgs.length < 3) return \"\"\n};\n\n\nasync function threeImageLayout(imgs) {\n    console.log(imgs);\n    let ratios = [1.1555555555555554, 1.1555555555555554, 1.3737864077669903];\n    let newImages = [];\n    for (let index = 0; index < imgs.length; index++) {\n        let im = imgs[index];\n        let img = await Lab.ui.createImage(im);\n        let canvas = await Lab.Image.smartCrop(img, 400, parseInt(400 / ratios[index]));\n        newImages.push(canvas.toDataURL());\n    };\n    imgs = newImages;\n\n    return `<section class=\"_design-ai-lab\" data-tools=\"mixlab无界社区\">\n    <section style=\"margin: 10px 2em;text-align: right;\">\n        <section style=\"display: flex;justify-content: center;align-items: flex-end;\">\n            <section style=\"display: flex;flex-direction: column;flex: 1;\">\n                <section style=\"display: flex;justify-content: flex-start;\">\n                    <section class=\"mix-brush\" data-brushtype=\"text\" style=\"font-size: 13px;letter-spacing: 1.5px;padding: 4px 1em;color: ${colors.font};display: inline-block;writing-mode: vertical-lr ;\">\n                        ENJOY\n                    </section>\n                </section>\n                <section style=\"display: flex;justify-content: center;align-items: center;margin-top: 1em;\">\n                    <section style=\"box-sizing:border-box;width: 100%;margin-right: 20px;\" data-width=\"100%\">\n                        <img style=\"box-sizing:border-box;width: 100%;display: block;\" src=\"${imgs[0]}\" data-ratio=\"1.1555555555555554\" data-w=\"135\" data-width=\"100%\"/>\n                    </section>\n                    <section style=\"box-sizing:border-box;width: 100%;margin-right: 10px;\" data-width=\"100%\">\n                        <img style=\"box-sizing:border-box;width: 100%;display: block;\" src=\"${imgs[1]}\" data-ratio=\"1.1555555555555554\" data-w=\"135\" hm_fix=\"325:318\" data-width=\"100%\"/>\n                    </section>\n                </section>\n                <section style=\"display: flex;justify-content: flex-start;margin-top: 1em;\">\n                    <section style=\"box-sizing:border-box;width: 10%;height: 4px;background:${colors.highlight[0]};\" data-width=\"10%\"></section>\n                </section>\n            </section>\n            <section style=\"box-sizing:border-box;width: 40%;\" data-width=\"40%\">\n                <section class=\"assistant\" style=\"display: flex;justify-content: flex-end;\">\n                    <section style=\"box-sizing:border-box;width: 10%;height: 4px;background:${colors.highlight[1]};\" data-width=\"10%\"></section>\n                </section>\n                <section style=\"box-sizing:border-box;width: 100%;margin-top: 20px;\" data-width=\"100%\">\n                    <img style=\"box-sizing:border-box;width: 100%;display: block;\" src=\"${imgs[2]}\" data-ratio=\"1.3737864077669903\" data-w=\"206\" data-width=\"100%\"/>\n                </section>\n            </section>\n        </section>\n    </section>\n</section>\n`;\n};\n\nfunction oneImageLayout2(title, imgurl, description) {\n    let oImg = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAADA0lEQVRYR8XXX0hTURwH8O/vbrubFQmBL2IvuZmC4EMP/YEebFtCUO/VSxBRUA89BCG5p0TIwB6C8qGHFf2hQEsKI92cUOhDpkFJ7s6sQASfpDJxu39+cTZXmvtz73bN87Kxnfs9n3vO72znElbaoKK2kYNfBWrlt9nPNuOV/oKSJ4joPkA9umGEWna7pzYVFIuxU69R4wB2AdAJ6AFwze+Tx/8n7M8MiUEjSuosCN2rAQwegCFdD9Q5o0TEG41bA+pPsFuGNgNwdY6BPxHhVpJd94746MdGwdaAxCDRROoiAzcKDLgIxkMQhQM+16jdsHWg2Bf26JqqANhZbDACpgAKS5r2uLmh4mux/ma+XwdK11IidRrAHTMB2T4MvCNQj6TrvYfqPWJzlNRygsSOM2rUCQYaS0oFJon4qcHUG/TJE1YycoIyO04NgnjASlievjMAXjJ40FiSIy1N9KtQZl6QuGgwofYR+JgNqGxEiog7/V53KF9mQVA0sVzLkD4AqLAR9Y1Bp4I+13CuzIKgTIGrrQB32AgSUQ8cSde55kZa/De3KGhsjF3fK9XxMgo8570wUyhY52q3DMrUUmofAW8AOGycqQUGrgR98u3VmUVnKNs5Op28ykxtNoIA0ByD21ejTIPE0i1UqqME7LEXhQVm6lre5uw6Wk1LpkHppVOSDUQ0BmCLzSiAEJYMdFsCZXZd8iQgDnL2N3HUsQxaKfKbBFywm0QMkWu9PfnI8g63GgNwwPrVea+YB9HxkkAisj/BVS6oIwR4bUERdwa87sslgwQiNr3sNVgaYaCqLBQhAjLOB2o9SlkggRhSUnsNwlAZO08hGJf8Ps9zkVc2KF3kcTVAEvdZR9EsMYf8dXI4O8O2gNI/B3H1ICR+AWC7yeVTQOgIeOW7Jf11mBkkklD3Azyyvi/NApggGJNgirOTx/Wf8udchzXbZihdT/FUkyHhvXjPwDQIEQIPG5r2+nD91jkzN2UrSDwcMHCGmHrh0J+JXWMGsZFL1urQtEflPBL9BktnFDZhBW8qAAAAAElFTkSuQmCC`;\n\n    return `<section class=\"mix-editor\" style='margin: 3em 0;'>\n    <section style=\"display: flex;\">\n        <section style=\"display: inline-block;\">\n            <section\n                style=\"width: 48px;height: 48px;overflow: hidden;border-radius: 50%;margin: 0px auto;text-align: center;box-sizing: border-box;\">\n                <img src=\"${imgurl}\"\n                style=\"width: 50px; height: auto; max-width: 100%;\"></section>\n            <p style=\"margin: 5px auto;color:#333;text-align:center;\">${title}</p>\n        </section>\n        <section style=\"display: inline-block;\">\n            <section\n                style=\"border-radius: 25px; background-color:rgb(188, 219, 250); padding: 15px; display: inline-block; color: rgb(17, 17, 17); margin-top: 13px; margin-left: 25px; box-sizing: border-box;\">\n                <img\n                    src='${oImg}' style='width: 30px;height: 30px;float: left;margin-left: -30px;'/>\n                \n                <p style=\"margin: 0px;clear: none !important;\">${description}</p>\n            </section>\n        </section>\n    </section>\n</section>`\n}\n\nfunction oneImageLayout(img) {\n    let dt = new Date();\n\n    return `<section class=\"mix-editor\">\n    <section\n        style=\"border: 1px solid ${colors.highlight[0]}; margin: 0 11px; padding: 14px 19px 22px 18px; box-sizing: border-box !important;\">\n        <section style=\"display: flex; flex-direction: column;\">\n            <section style=\"display: flex; justify-content: space-between;\">\n                <section>\n                    <p\n                        style=\"color: ${colors.highlight[1]}; font-size: 16px; font-weight: bold; line-height: 16px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                        我爱旅行</p>\n                </section>\n                <section>\n                    <p\n                        style=\"color: ${colors.highlight[1]}; font-size: 10px; line-height: 14px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                        ${dt.getFullYear()}.${dt.getMonth() + 1}.${dt.getDate()}</p>\n                </section>\n            </section>\n            <section style=\"margin-top: 9px;\">\n                <p\n                    style=\"color: ${colors.highlight[1]}; font-size: 14px; line-height: 14px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                    I LOVE TO TRAVEL</p>\n            </section>\n            <section style=\"margin-top: 13px;\"><img\n                    style=\"max-width: 100%; width: 100%; display: block; height: auto;\"\n                    src=\"${img}\"\n                    alt=\"\"></section>\n            <section\n                style=\"width: 61px;height: 6px;background-color: ${colors.background};text-align: right;align-self: flex-end;margin-top: 7px;\">\n            </section>\n            <section style=\"display: flex;justify-content: space-between;align-items: center;margin-top: 17px;\">\n                <section style=\"margin-left: -3px; margin-top: 5px;\">\n                    <p\n                        style=\"color: ${colors.highlight[1]}; font-size: 14px; line-height: 14px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                        LOVE TO TRAVEL</p>\n                </section>\n                <section style=\"display: flex; flex-direction: column;\">\n                    <section style=\"align-self: flex-end;\">\n                        <p\n                            style=\"color: ${colors.highlight[1]}; font-size: 14px; line-height: 14px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                            旅行是心灵的阅读</p>\n                    </section>\n                    <section>\n                        <p\n                            style=\"color: ${colors.highlight[1]}; font-size: 14px; line-height: 14px; font-family: '思源黑体'; letter-spacing: 1px; margin: 0\">\n                            而阅读是心灵的旅行</p>\n                    </section>\n                </section>\n            </section>\n        </section>\n    </section>\n</section>`\n}\n\n\nasync function setColorsForGraph() {\n    cards.innerHTML = '';\n    let data = await createGraph();\n\n    _GRAPHE_COLORS = Array.from(data.categories, (c, i) => _GRAPHE_COLORS[i % _GRAPHE_COLORS.length]);\n\n    data.categories.forEach((c, index) => {\n        let cg = Lab.ui.createGroup('row');\n        cg.style = `display: flex;\n            justify-content: space-between;`;\n\n        let text = `${c} - ${data.categoriesCount[c]}`;\n\n        let cIn = Lab.ui.createInput('color', text, newColors => {\n            _GRAPHE_COLORS[index] = newColors[0];\n            db.set('_GRAPHE_COLORS', _GRAPHE_COLORS);\n        }, true, false);\n        cIn.setDefaultValue([_GRAPHE_COLORS[index]]);\n        cg.add(Lab.ui.createBaseText(text));\n        cg.add(cIn);\n        cards.add(cg);\n    });\n}\n\nasync function resetColorsForGraph() {\n    cards.innerHTML = '';\n    let data = await createGraph();\n    _GRAPHE_COLORS = ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'];\n    _GRAPHE_COLORS = Array.from(data.categories, (c, i) => _GRAPHE_COLORS[i % _GRAPHE_COLORS.length]);\n\n    data.categories.forEach((c, index) => {\n        let cg = Lab.ui.createGroup('row');\n        cg.style = `display: flex;\n            justify-content: space-between;`;\n\n        let text = `${c} - ${data.categoriesCount[c]}`;\n\n        let cIn = Lab.ui.createInput('color', text, newColors => {\n            _GRAPHE_COLORS[index] = newColors[0];\n            db.set('_GRAPHE_COLORS', _GRAPHE_COLORS);\n        }, true, false);\n        cIn.setDefaultValue([_GRAPHE_COLORS[index]]);\n        cg.add(Lab.ui.createBaseText(text));\n        cg.add(cIn);\n        cards.add(cg);\n    });\n}\n\n\nasync function runCreateGraph() {\n    Lab.ui.loading(0);\n    if (!myChart) initGraph();\n    resetGraph();\n    let data = await createGraph();\n    displayGraph(data);\n    // Lab.clipboard.write(JSON.stringify(data));\n    displayTags(data.tags);\n    setTimeout(() => Lab.ui.loading(100), 500);\n}\n\nasync function createGraph() {\n    var links = [],\n        nodes = [],\n        tags = {},\n        categories = [],\n        categoriesCount = {},\n        // 推荐次序\n        levels = [];\n\n    let datasetNew = {...dataset };\n\n    // categories用来分类的字段\n    for (let id in datasetNew) {\n        let data = datasetNew[id];\n        if (data.hasOwnProperty('applicationCategory')) {\n            datasetNew[id]['author'] = data['applicationCategory'] || '-';\n        };\n    };\n\n    // 使用author作为分类\n    for (let id in datasetNew) {\n        let data = datasetNew[id];\n        // console.log(data.author)\n        if (!categories.includes(data.author)) categories.push(data.author);\n        if (!levels.includes(data.mainIndex)) levels.push(data.mainIndex);\n        Array.from(data.tags, t => {\n            if (!tags[t.keyword]) tags[t.keyword] = 0;\n            tags[t.keyword] += t.weight;\n        })\n    };\n    let tagsList = [];\n    for (const keyword in tags) {\n        tagsList.push({\n            weight: tags[keyword],\n            keyword\n        });\n    };\n    tags = tagsList.sort((a, b) => b.weight - a.weight);\n    // console.log(tags)\n\n    for (let id in datasetNew) {\n        let data = datasetNew[id];\n\n        // 获得图片的base64\n        data.image = await getImgBase64(data.image);\n\n        nodes.push({\n            id,\n            title: data.title,\n            value: 0,\n            mainIndex: data.mainIndex,\n            category: data.author,\n            tags: data.tags,\n            image: data.image,\n            targetCategories: {}\n        });\n        // 统计分类下面的数量\n        if (!categoriesCount[data.author]) categoriesCount[data.author] = 0;\n        categoriesCount[data.author]++;\n    };\n\n    for (let id in datasetNew) {\n        let data = datasetNew[id];\n        Array.from(data.relate, r => {\n            let t = r.url.replace(/.*s\\?/ig, '');\n            let tid, tauthor;\n            //     console.log(t);\n            for (let m in datasetNew) {\n                let n = datasetNew[m].url.replace(/.*s\\?/ig, '');\n                if (t == n) {\n                    tid = m;\n                    tauthor = datasetNew[m].author;\n                };\n            };\n            if (tid) {\n                links.push({ source: id, target: tid, sourceCategory: data.author });\n                // console.log(id == tid);\n                // 计算节点权重，link越多，节点越大\n                Array.from(nodes, n => {\n                    if (n.id == tid) {\n                        n.value++;\n                        if (!n.targetCategories[data.author]) n.targetCategories[data.author] = [];\n                        n.targetCategories[data.author].push(data.title);\n                    };\n                })\n            };\n        })\n    };\n\n    // 排序\n    categories = Array.from(categories, c => {\n        return {\n            name: c,\n            score: categoriesCount[c]\n        }\n    }).sort((a, b) => b.score - a.score);\n    categories = Array.from(categories, c => c.name);\n    // categories = categories.sort((a, b) => a.localeCompare(b));\n\n\n    links = links.sort((a, b) => a.sourceCategory.localeCompare(b.sourceCategory));\n\n    nodes = nodes.sort((a, b) => a.category.localeCompare(b.category));\n\n    levels = levels.sort((a, b) => a - b);\n\n    return { links, nodes, categories, tags, categoriesCount, levels }\n}\n\n\nfunction displayTags(tagsAll) {\n    let topN = Lab.ui.createTags(Array.from(tagsAll.slice(0, 10), t => t.keyword)),\n        bottomN = Lab.ui.createTags(Array.from(tagsAll.slice(tagsAll.length - 10, tagsAll.length), t => t.keyword)),\n        otherN = Lab.ui.createTags(Array.from(tagsAll.slice(10, tagsAll.length - 10), t => t.keyword));\n    // console.log(topN)\n    let data = [{\n        active: true,\n        title: 'TOP10',\n        data: Array.from(topN.children, c => c.outerHTML)\n    }];\n    if (bottomN.children.length > 0) data.push({\n        active: false,\n        title: 'BOTTOMN',\n        data: Array.from(bottomN.children, c => c.outerHTML)\n    });\n    if (otherN.children.length > 0) data.push({\n        active: false,\n        title: '其他',\n        data: Array.from(otherN.children, c => c.outerHTML)\n    });\n\n    cards.innerHTML = '';\n    let div = Lab.ui.createAccordion(data);\n    cards.add(div);\n};\n\n\n// 提取文章特征\nfunction extractArticalFeature(d) {\n    var dts = {};\n    Array.from(Lab.nlp.jieba.extract((d.title + ' ' + d.description).toLowerCase(), 10), t => dts[t.keyword] = t.weight);\n    // console.log(dts);\n    dts = Array.from(Lab.nlp.jieba.extract(d.text ? d.text.toLowerCase() : d.description.toLowerCase(), 30), t => {\n        if (dts[t.keyword]) return t\n    }).filter(f => f);\n    return dts\n};\n\nfunction initGraph() {\n    let c = Lab.ui.createGroup('container');\n    c.style = `position: fixed;\n    bottom: 0;\n    right: 0;\n    outline: gray solid 1px;\n    height: 300px;\n    width: 300px;\n    background: #fff;`;\n    let m = Lab.ui.createGroup('container');\n    m.style = `height: 100%;\n    width: 100%;`;\n    // let script = document.createElement('script');\n    // script.type = \"text/javascript\";\n    // script.src = \"https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js\";\n    // c.add(script);\n    mainDiv.add(c);\n    c.add(m);\n\n    let btns = Lab.ui.createGroup('column');\n    c.add(btns);\n    btns.style = `position: absolute;\n    top: 0;`;\n\n    let btn = Lab.ui.createIcon('copy', async() => {\n        let im = await Lab.ui.createImage(myChart.getDataURL({\n            type: 'jpeg',\n            pixelRatio: 2,\n            backgroundColor: '#fff',\n            excludeComponents: ['toolbox', 'legend', 'title']\n        }));\n        cards.add(im);\n    }, false);\n    btns.add(btn);\n\n\n    let scaleBtn = Lab.ui.createIcon('light', async() => {\n        if (c.style.width === '300px') {\n            c.style.width = \"100%\";\n            c.style.height = '100%';\n            c.style.top = '0';\n        } else {\n            c.style.width = \"300px\";\n            c.style.height = '300px';\n            c.style.top = 'auto';\n            c.style.bottom = '0';\n        }\n\n        myChart.resize();\n    }, false);\n    btns.add(scaleBtn);\n\n    let toggleBtn = Lab.ui.createIcon('play', async() => {\n        _GRAPHE_LABEL++;\n        if (_GRAPHE_LABEL > 3) _GRAPHE_LABEL = 0;\n        myChart.resize();\n    }, false);\n    btns.add(toggleBtn);\n\n    // 改变布局类型\n    let layoutBtn = Lab.ui.createIcon('fan', async() => {\n        if (_GRAPHE_LAYOUT === 'circular') {\n            _GRAPHE_LAYOUT = 'force';\n        } else {\n            _GRAPHE_LAYOUT = 'circular';\n        }\n        resetGraph();\n        let data = await createGraph();\n        displayGraph(data);\n    }, false);\n    btns.add(layoutBtn);\n\n    // 改变分类\n    let cBtn = Lab.ui.createIcon('thumbtack', async() => {\n        if (_GRAPHE_C_BY_L === true) {\n            _GRAPHE_C_BY_L = false;\n        } else {\n            _GRAPHE_C_BY_L = true;\n        }\n        resetGraph();\n        let data = await createGraph();\n        displayGraph(data);\n    }, false);\n    btns.add(cBtn);\n\n\n    resetGraph(m);\n};\n\n// 重设\nfunction resetGraph(dom) {\n    if (myChart) {\n        if (!dom) dom = myChart.getDom();\n        myChart.dispose();\n    }\n\n    let option = {\n            title: {\n                text: '',\n                subtext: '',\n                top: 'bottom',\n                left: 'right'\n            },\n            tooltip: {\n                triggerOn: 'click',\n                formatter: e => {\n                        return `${e.data.categoryName} _ ${e.data.value} \n                <br> 🔥 ${e.name}\n                <br> ${(() => {\n                        let text = '';\n                        for (const ct in e.data.targetCategories) {\n                            text += `💡 ${ct} <br>${e.data.targetCategories[ct].join('<br>')}<br>`\n                        };\n                        return text\n                    })()}`\n            }\n        },\n        color: _GRAPHE_COLORS,\n        // legend: [{\n        //     data: graph.categories.map(function (a) {\n        //         return a.name\n        //     })\n        // }],\n        zoom: 0.8,\n        animationDurationUpdate: 1500,\n        animationEasingUpdate: 'quinticInOut',\n        emphasis: {\n            focus: 'adjacency',\n            //blurScope: 'coordinateSystem'\n        },\n        series: [\n            {\n                name: '',\n                type: 'graph',\n                layout: _GRAPHE_LAYOUT,\n                circular: {\n                    rotateLabel: true\n                },\n                data: [],\n                links: [],\n                categories: [],\n                roam: true,\n                label: {\n                    position: 'right',\n                    fontSize: 10,\n                    formatter: function (b) {\n                        // console.log(b)\n                        //b.data.categoryName\n                        //b.data.tags[0].keyword\n                        let t=b.data.tags[0]?b.data.tags[0].keyword:'';\n                   \n                        //b.name\n                        if (_GRAPHE_LABEL === 0) return b.data.categoryName;\n                        if (_GRAPHE_LABEL === 1) return t\n                        if (_GRAPHE_LABEL === 2) return ''\n                        return b.name;\n                    },\n                },\n                lineStyle: {\n                    color: 'source',\n                    curveness: 0.3\n                },\n                force: {\n                    repulsion: 100\n                },\n                left: 10,\n                top: 10,\n                right: 10,\n                bottom: 10\n            }\n        ]\n    };\n\n    if (dom) myChart = echarts.init(dom, null, { renderer: 'canvas' });\n    //myChart.setOption(option);\n\n    if (dom && option && typeof option === 'object') {\n        myChart.setOption(option);\n    }\n}\n\n\n\nfunction displayGraph(graph = {}) {\n    // var myChart = echarts.init(dom);\n    // myChart.showLoading();\n    // setTimeout(() => myChart.hideLoading(), 1000);\n    if(_GRAPHE_C_BY_L==true){\n        graph.categories = Array.from(graph.levels, (c, i) => {\n            return {\n                name: `相关性${c}`,\n                icon: 'circle'\n            }\n        });\n    }else{\n        graph.categories = Array.from(graph.categories, (c, i) => {\n            return {\n                name: c,\n                icon: 'circle'\n            }\n        });\n    };\n    \n    \n    graph.nodes.forEach(function (node) {\n        node.name = node.title;\n        node.label = {\n            show: true\n        };\n        node.symbolSize = Math.max(20, node.value * 2);\n        node.symbol = `image://${node.image}`;\n\n        node.categoryName = node.category;\n        if(_GRAPHE_C_BY_L==true){\n            node.category=node.mainIndex;\n        }else{\n            node.category = Array.from(graph.categories, (c, i) => {\n                if (c.name == node.categoryName) return i\n            }).filter(f => f != undefined)[0];\n        }\n          \n    });\n\n\n\n    // 填入数据\n    if (myChart) myChart.setOption({\n        layout: _GRAPHE_LAYOUT,\n        // colors:[\"#003366\", \"#006699\", \"#4cabce\", \"#e5323e\"],\n        legend: [{\n            type: 'scroll',\n            left: '80%',\n            right: 12,\n            top: 24,\n            height: '80%',\n            orient: 'vertical',\n            data: graph.categories,\n            itemStyle: {\n                borderWidth: 2\n            }\n        }],\n        series: [{\n            data: graph.nodes,\n            links: graph.links,\n            categories: graph.categories,\n        }]\n    });\n\n    return\n}\n\n\nfunction clearDataset() {\n    dataset = {};\n    db.set('dataset', {});\n    cards.innerHTML = '';\n    tag.innerText = `收集 ${Object.keys(dataset).length}`;\n}\n\nfunction selectForCreate() {\n    selectModel.show();\n    selectModel.querySelector('.content').innerHTML = '';\n    selectModel.querySelector('.content').style = `height: 80vh;overflow: scroll;`;\n    // selectModel.querySelector('.content').setAttribute('contenteditable', true);\n\n    var datas = [];\n    for (let id in dataset) {\n        datas.push(dataset[id]);\n    };\n    datas = datas.sort((a, b) => b.mainIndex);\n\n    let tags = Lab.ui.createTags(Array.from(datas, d => {\n        return {\n            id: d.id,\n            label: d.title\n        }\n    }));\n    Array.from(tags.querySelectorAll('.label'), i => i.addEventListener('click', e => {\n        // console.log(e);\n        e.target.classList.toggle('red');\n\n    }));\n    selectModel.add(tags);\n    // selectBtn.setAttribute('data-click', '2');\n\n}\n\nasync function getImgBase64(imgurl) {\n    if (imgurl.match('data:image')) return imgurl\n    // 获得图片的base64\n    let base64 = await db.get(imgurl);\n    if (!base64) {\n        base64 = await Lab.Image.getNativeImageFromWebview2(imgurl);\n        db.set(imgurl, base64);\n    };\n    return base64\n}",
  "code_length": 288,
  "size": [
    1118,
    795
  ],
  "extname": "designlabplugin",
  "version": "0.3.0",
  "package_version": "0.1.2",
  "package_id": "aa265fef6f33eca5d2d189a79fa3c427e259c91e",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@node-rs/jieba": "^1.2.0",
    "@paddlejs-models/humanseg": "0.0.5",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "@tensorflow/tfjs-converter": "^2.8.6",
    "@tensorflow/tfjs-node": "^3.3.0",
    "about-window": "^1.14.0",
    "blockly": "^4.20201217.0",
    "color": "^3.1.3",
    "colorthief": "^2.3.2",
    "electron-json-storage": "^4.4.0",
    "escodegen": "^2.0.0",
    "espree": "^7.3.1",
    "estraverse": "^5.2.0",
    "exceljs": "^4.2.1",
    "fabric": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "leader-line": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "monaco-editor": "^0.21.3",
    "muuri": "^0.9.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "p5": "^1.3.1",
    "p5.createloop": "^0.2.8",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "recordrtc": "^5.6.2",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "spatial-db": "0.0.25",
    "sweetalert2": "^10.15.7",
    "timeago.js": "^4.0.2",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1624685374920
}