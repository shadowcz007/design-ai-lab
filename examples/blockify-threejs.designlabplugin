{
  "id": "bbd9397ea85d8c4d15cc80c48ab1c7f62b66b485",
  "poster": "data:image/png;base64,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",
  "title": "blockify-threejs",
  "knowledge": {
    "course": "- 使用threejs生成方块头像",
    "readme": "blockify-threejs",
    "author": "shadow",
    "version": "0.2"
  },
  "code": "var loading = new Promise((resolve, reject) => {\n  Lab.base.loadFromLocal('three/build/three.min.js').then(() => {\n    console.log('load threejs')\n    Lab.base\n      .loadFromLocal('three/examples/js/controls/OrbitControls.js')\n      .then(() => {\n        console.log('OrbitControls')\n        Lab.base\n          .loadFromLocal('three/examples/js/libs/stats.min.js')\n          .then(() => {\n            console.log('stats')\n            resolve()\n          })\n      })\n  })\n})\n\nfunction gui () {\n  let colors = {\n    cubecolor: '#6b81f9',\n    frontcolor: '#6b81f9',\n    sidecolor: '#6b81f9',\n    topcolor: '#6b81f9',\n    bgcolor: '#161616'\n  }\n  loading.then(() => {\n    let { scene, camera, renderer } = createScene()\n    Lab.ui.add(renderer.domElement)\n\n    scene.background = new THREE.Color(colors.bgcolor)\n\n    let { block, mat } = createBlock(colors.cubecolor)\n    scene.add(block)\n    window.mat = mat\n    let { light1, light2, lighta } = createLights()\n    light1.target = block\n    scene.add(light1)\n    scene.add(light2)\n    scene.add(lighta)\n    createPannel(colors, mat.front, mat.side, mat.top, scene, renderer)\n  })\n}\n\nfunction createScene () {\n  const scene = new THREE.Scene()\n  const camera = new THREE.PerspectiveCamera(\n    1,\n    window.innerWidth / window.innerHeight,\n    0.1,\n    1000\n  )\n  camera.position.z = 500\n  const renderer = new THREE.WebGLRenderer({\n    // alpha: true,\n    antialias: true,\n    preserveDrawingBuffer: true\n  })\n  renderer.setSize(window.innerWidth, window.innerHeight)\n  renderer.shadowMap.enabled = true;\n\n  const controls = new THREE.OrbitControls(camera, renderer.domElement)\n  // controls.target.copy(lookAtPosition);\n  controls.update()\n\n  window.animate = function () {\n    requestAnimationFrame(window.animate)\n    // block.rotation.y += .01;\n    controls.update()\n    renderer.render(scene, camera)\n  }\n\n  window.animate()\n\n  window.addEventListener('resize', onWindowResize, false)\n\n  function onWindowResize () {\n    camera.aspect = window.innerWidth / window.innerHeight\n    camera.updateProjectionMatrix()\n    renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  return { scene, camera, renderer }\n}\n\nfunction createBlock (cubecolor = 0xffffff) {\n  const frontmat = new THREE.MeshPhongMaterial({\n    color: cubecolor,\n    side: THREE.DoubleSide\n  })\n  const geometry = new THREE.PlaneGeometry(3, 3)\n  const front = new THREE.Mesh(geometry, frontmat)\n  // front.castShadow = true;\n  front.position.z = 1.5\n  const sidemat = new THREE.MeshPhongMaterial({\n    color: cubecolor,\n    side: THREE.DoubleSide\n  })\n  const side = new THREE.Mesh(geometry, sidemat)\n  side.rotation.y = Math.PI / 2\n  side.position.x = 1.5\n  // side.castShadow = true;\n\n  const topmat = new THREE.MeshPhongMaterial({\n    color: cubecolor,\n    side: THREE.DoubleSide\n  })\n  const top = new THREE.Mesh(geometry, topmat)\n  top.rotation.x = -Math.PI / 2\n  top.position.y = 1.5\n  // top.castShadow = true;\n  // const bottom = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshPhongMaterial({\n  //   color: 'rgba(0,0,0,0.8)',\n  //   side: THREE.DoubleSide\n  // }))\n  // bottom.rotation.x = -Math.PI / 2\n  // bottom.position.y = -1.5\n  // bottom.receiveShadow = true;\n\n  const group = new THREE.Group()\n  group.add(front, side, top)\n  group.rotation.y = -Math.PI / 4\n  group.rotation.x = Math.PI / 8\n  return {\n    block: group,\n    mat: {\n      front: frontmat,\n      side: sidemat,\n      top: topmat\n    }\n  }\n}\n\nfunction createLights () {\n  const light1 = new THREE.DirectionalLight(0xa46cff, 1)\n  light1.position.set(0, -1, 3)\n  // light1.castShadow = true;\n  const light2 = new THREE.DirectionalLight(0xff6ddf, 1)\n  light2.position.set(-3, 2, 1.5)\n  // light2.castShadow = true;\n\n  const lighta = new THREE.AmbientLight(0xffffff, 0.6)\n  \n  return {\n    light1,\n    light2,\n    lighta\n  }\n}\n\nfunction createPannel (colors, frontmat, sidemat, topmat, scene, renderer) {\n  let params = {\n    ...colors,\n    fileinput: () => {\n      let fp = Lab.ui.getFilePath(1)\n      if (fp && fp[0]) {\n        const textureLoader = new THREE.TextureLoader()\n        textureLoader.crossOrigin = 'Anonymous'\n        const frontTexture = textureLoader.load(fp[0], texture => {\n          texture.repeat.set(1 / 3, 1 / 3)\n          texture.needsUpdate = true\n          const fronttex = texture.clone()\n          fronttex.offset.set(1 / 3, 1 / 3)\n          fronttex.needsUpdate = true\n          frontmat.map = fronttex\n          frontmat.needsUpdate = true\n\n          const sidetex = texture.clone()\n          sidetex.offset.set(2 / 3, 1 / 3)\n          sidetex.needsUpdate = true\n          sidemat.map = sidetex\n          sidemat.needsUpdate = true\n\n          const toptex = texture.clone()\n          toptex.offset.set(1 / 3, 2 / 3)\n          toptex.needsUpdate = true\n          topmat.map = toptex\n          topmat.needsUpdate = true\n        })\n      }\n    },\n    save: () => {\n      let c = Lab.Image.createCanvasFromImage(renderer.domElement)\n      let ctx = c.getContext('2d')\n      ctx.font = '16px Arial'\n      ctx.fillStyle = 'white'\n      ctx.fillText('by design-ai-lab', 24, c.height - 8)\n      let base64=c.toDataURL();\n      let fp=Lab.ui.getFilePath(2);\n      if(fp&&fp[0]) Lab.base.saveBase64(base64,fp[0]+`/${(new Date()).getTime()}.png`);\n    }\n  }\n\n  const gui = Lab.ui.createDatGUI()\n  gui.addColor(params, 'cubecolor').onFinishChange(() => {\n    // console.log(params)\n    frontmat.color.set(params.cubecolor)\n    sidemat.color.set(params.cubecolor)\n    topmat.color.set(params.cubecolor)\n    params.frontcolor = params.cubecolor\n    params.topcolor = params.cubecolor\n    params.sidecolor = params.cubecolor\n    gui.updateDisplay()\n  })\n\n  gui.addColor(params, 'frontcolor').onFinishChange(() => {\n    frontmat.color.set(params.frontcolor)\n  })\n\n  gui.addColor(params, 'sidecolor').onFinishChange(() => {\n    sidemat.color.set(params.sidecolor)\n  })\n\n  gui.addColor(params, 'topcolor').onFinishChange(() => {\n    topmat.color.set(params.topcolor)\n  })\n  gui.addColor(params, 'bgcolor').onFinishChange(() => {\n    scene.background = new THREE.Color(params.bgcolor)\n  })\n\n  gui\n    .add(params, 'fileinput')\n    .name('上传图片')\n    .onFinishChange(() => {})\n\n    gui\n    .add(params, 'save')\n    .name('保存图片')\n    .onFinishChange(() => {})\n}\n",
  "code_length": 56,
  "size": [
    605,
    585
  ],
  "extname": "designlabplugin",
  "version": "0.2",
  "package_version": "0.1.2",
  "package_id": "df22ad54c8e3dee49e71dd4ce9538ee33b2a7d1e",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@kilokilo/three-bmfont-text": "^3.1.0",
    "@mediapipe/camera_utils": "^0.3.1632432234",
    "@mediapipe/drawing_utils": "^0.3.1620248257",
    "@mediapipe/holistic": "^0.5.1635989137",
    "@node-rs/jieba": "^1.3.1",
    "@paddlejs-models/humanseg": "0.0.5",
    "@pixiv/three-vrm": "^0.6.7",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "about-window": "^1.14.0",
    "animejs": "^3.2.1",
    "color": "^3.1.3",
    "dat.gui": "^0.7.7",
    "debounce": "^1.2.1",
    "electron-json-storage": "^4.4.0",
    "electron-squirrel-startup": "^1.0.0",
    "emoji-picker-element": "^1.6.0",
    "emoji-regex": "^9.2.2",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "face-api.js": "^0.22.2",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "horajs": "^0.1.3",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "kalidokit": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "osc-js": "^2.1.2",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "pixelit": "https://github.com/giventofly/pixelit.git",
    "recordrtc": "^5.6.2",
    "regl": "^2.1.0",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "three": "^0.134.0",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1639131383732
}