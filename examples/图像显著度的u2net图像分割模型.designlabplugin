{
  "poster": "data:image/png;base64,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",
  "knowledge": {
    "course": "演示抠图\n\n\n- 视频、gif保存为png帧序列\n- 图片\n\n\n- 保存至本地\n- 拷贝至剪切板",
    "readme": "图像显著度的u2net图像分割模型",
    "author": "shadow",
    "version": "0.2"
  },
  "code": "//Hello AI world!\nvar model, im, base64, smartCropIsOn = false;\n\n\n// GUI布局\nvar mainDiv = Lab.ui.createGroup(),\n    contentDiv = Lab.ui.createGroup(),\n    leftDiv = Lab.ui.createGroup(),\n    rightDiv = Lab.ui.createGroup(),\n    bottomDiv = Lab.ui.createGroup();\n\n// 动图结果\nvar gifResult = new Lab.Canvas(300, 300),\n    inputFile,\n    imgResult = Lab.ui.createGroup();\n\n\nfunction gui() {\n   \n    // 模型\n    model = Lab.ai.u2net;\n\n    // 布局\n    Lab.ui.add(mainDiv);\n    mainDiv.add(contentDiv);\n    mainDiv.add(bottomDiv);\n    contentDiv.add(leftDiv);\n    contentDiv.add(rightDiv);\n\n    rightDiv.add(imgResult);\n    rightDiv.add(gifResult.getElement());\n\n    // style\n    mainDiv.style = `width: 100%;\n    height: 100vh;`;\n    contentDiv.style = `display: flex;\n    justify-content: space-between;\n    width: calc(100% - 24px);\n    height: calc(100% - 24px);\n    padding: 12px;`;\n    bottomDiv.style = `\n    position: fixed;\n    z-index: 99;\n    width: 100%;\n    height: 56px;\n    bottom: 0;\n    text-align: center;`\n\n    inputFile = Lab.ui.createInput('img', \"图片\", async url => {\n        if (!(url && url[0])) return;\n        url = url[0]\n\n        let fileInfo = await Lab.video.getMediaDurationAndType(url);\n        console.log(fileInfo);\n        if (fileInfo.type === 'gif' || fileInfo.type === 'video') {\n\n            let frames = await Lab.video.videoExtract(url, fileInfo.width + ':' + fileInfo.height, null, fadeIn = 0, fadeOut = 0, fps = fileInfo.frame_rate)\n            frames = frames.images;\n\n            let spirit = document.createElement('canvas');\n            spirit.width = frames.length * fileInfo.width;\n            spirit.height = fileInfo.height;\n            let ctx = spirit.getContext('2d');\n            let index = 0;\n            //let g = new Lab.ui.GIF();\n            for (let f of frames) {\n                let seg = await model.segment(await Lab.ui.createImage(f));\n                ctx.drawImage(seg, 0, 0, seg.width, seg.height, index * seg.width, 0, seg.width, seg.height);\n                // g.add(seg, fileInfo.frame_rate);\n                index++;\n                console.log(index / frames.length, frames.length);\n            };\n            // base64 = await g.render();\n            base64 = spirit.toDataURL();\n            let gImg = await Lab.ui.createImage(base64);\n            imgResult.innerHTML = \"\";\n            imgResult.add(gImg);\n            // im.appendChild(spirit);\n\n            // 预览 \n            await gifResult.addSprite(base64, {\n                width: fileInfo.width,\n                height: fileInfo.height,\n                frameTime: 1000 / fileInfo.frame_rate\n            });\n            gifResult.zoomToFitCanvas();\n\n        } else if (fileInfo.type === 'img') {\n            doImg(url);\n        };\n\n    }, true, false);\n\n    leftDiv.add(inputFile);\n    // 粘贴图片\n    let pasteImg = Lab.ui.createIcon('paste', async() => {\n        let base64 = Lab.clipboard.read('img').toDataURL();\n        inputFile.setDefaultValue([base64]);\n        doImg(base64);\n    }, false);\n    leftDiv.add(pasteImg);\n\n    // 智能裁切开关\n    let smartCropToggle = Lab.ui.createToggle({\n        label: `智能裁切`,\n        changeFn: e => smartCropIsOn = e\n    });\n    leftDiv.add(smartCropToggle);\n\n    let download = Lab.ui.createIcon('download', () => {\n        Lab.ui.saveBase64Dialog(base64);\n    }, false);\n\n    let copy = Lab.ui.createIcon('copy', () => {\n        Lab.clipboard.write(base64, 'base64');\n    }, false);\n\n    bottomDiv.add(download);\n    bottomDiv.add(copy);\n\n}\n\n\n// 处理图片，抠图-显示\nasync function doImg(url) {\n    Lab.ui.loading(0);\n    let img = await Lab.ui.createImage(url);\n    model.segment(img).then(c => {\n        c.style = `width: auto;\n        margin-top: 32px;\n        max-height: 300px;\n        max-width: 300px;`;\n        imgResult.innerHTML = \"\";\n        base64 = c.src;\n        imgResult.add(c);\n        Lab.ui.loading(100);\n    });\n};",
  "code_length": 29,
  "size": [
    600,
    600
  ],
  "extname": "designlabplugin",
  "version": "0.2",
  "package_version": "0.1.2",
  "package_id": "fc3048f6cd1a55072ae4ad954863a824440d04ae",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@node-rs/jieba": "^1.2.0",
    "@paddlejs-models/humanseg": "0.0.5",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "@tensorflow/tfjs-converter": "^2.8.6",
    "@tensorflow/tfjs-node": "^3.3.0",
    "about-window": "^1.14.0",
    "aframe": "^1.2.0",
    "blockly": "^4.20201217.0",
    "color": "^3.1.3",
    "colorthief": "^2.3.2",
    "electron-json-storage": "^4.4.0",
    "emoji-picker-element": "^1.6.0",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "fabric": "^4.3.1",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "leader-line": "^1.0.5",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "monaco-editor": "^0.21.3",
    "muuri": "^0.9.3",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "recordrtc": "^5.6.2",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "spatial-db": "0.0.25",
    "sweetalert2": "^10.15.7",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1627471437981
}