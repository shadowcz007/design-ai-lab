{
  "id": "f59d9ec4e9d5184fba1fdd3144c73a404a045737",
  "poster": "data:image/png;base64,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",
  "title": "图像显著度的u2net图像分割模型",
  "knowledge": {
    "course": "演示抠图\n\n\n- 视频、gif保存为png帧序列\n- 图片\n\n\n- 保存至本地\n- 拷贝至剪切板",
    "readme": "图像显著度的u2net图像分割模型",
    "author": "shadow",
    "version": "0.3"
  },
  "code": "//Hello AI world!\nvar model, im, base64, smartCropIsOn = false;\n\n\n// GUI布局\nvar mainDiv = Lab.ui.createGroup(),\n    contentDiv = Lab.ui.createGroup(),\n    leftDiv = Lab.ui.createGroup(),\n    rightDiv = Lab.ui.createGroup(),\n    bottomDiv = Lab.ui.createGroup();\n\n// 动图结果\nvar gifResult = new Lab.Canvas(300, 300),\n    inputFile,\n    imgResult = Lab.ui.createGroup();\n\n\nfunction gui() {\n   \n    // 模型\n    model = Lab.ai.u2net;\n\n    // 布局\n    Lab.ui.add(mainDiv);\n    mainDiv.add(contentDiv);\n    mainDiv.add(bottomDiv);\n    contentDiv.add(leftDiv);\n    contentDiv.add(rightDiv);\n\n    rightDiv.add(imgResult);\n    rightDiv.add(gifResult.getElement());\n\n    // style\n    mainDiv.style = `width: 100%;\n    height: 100vh;`;\n    contentDiv.style = `display: flex;\n    justify-content: space-between;\n    width: calc(100% - 24px);\n    height: calc(100% - 24px);\n    padding: 12px;`;\n    bottomDiv.style = `\n    position: fixed;\n    z-index: 99;\n    width: 100%;\n    height: 56px;\n    bottom: 0;\n    text-align: center;`\n\n    inputFile = Lab.ui.createInput('img', \"图片\", async url => {\n        if (!(url && url[0])) return;\n        url = url[0]\n\n        let fileInfo = await Lab.video.getMediaDurationAndType(url);\n        console.log(fileInfo);\n        if (fileInfo.type === 'gif' || fileInfo.type === 'video') {\n\n            let frames = await Lab.video.videoExtract(url, fileInfo.width + ':' + fileInfo.height, null, fadeIn = 0, fadeOut = 0, fps = fileInfo.frame_rate)\n            frames = frames.images;\n\n            let spirit = document.createElement('canvas');\n            spirit.width = frames.length * fileInfo.width;\n            spirit.height = fileInfo.height;\n            let ctx = spirit.getContext('2d');\n            let index = 0;\n            //let g = new Lab.ui.GIF();\n            for (let f of frames) {\n                let seg = await model.segment(await Lab.ui.createImage(f));\n                ctx.drawImage(seg, 0, 0, seg.width, seg.height, index * seg.width, 0, seg.width, seg.height);\n                // g.add(seg, fileInfo.frame_rate);\n                index++;\n                console.log(index / frames.length, frames.length);\n            };\n            // base64 = await g.render();\n            base64 = spirit.toDataURL();\n            let gImg = await Lab.ui.createImage(base64);\n            imgResult.innerHTML = \"\";\n            imgResult.add(gImg);\n            // im.appendChild(spirit);\n\n            // 预览 \n            await gifResult.addSprite(base64, {\n                width: fileInfo.width,\n                height: fileInfo.height,\n                frameTime: 1000 / fileInfo.frame_rate\n            });\n            gifResult.zoomToFitCanvas();\n\n        } else if (fileInfo.type === 'img') {\n            doImg(url);\n        };\n\n    }, true, false);\n\n    leftDiv.add(inputFile);\n    // 粘贴图片\n    let pasteImg = Lab.ui.createIcon('paste', async() => {\n        let base64 = Lab.clipboard.read('img').toDataURL();\n        inputFile.setDefaultValue([base64]);\n        doImg(base64);\n    }, false);\n    leftDiv.add(pasteImg);\n\n    // 智能裁切开关\n    let smartCropToggle = Lab.ui.createToggle({\n        label: `智能裁切`,\n        changeFn: e => smartCropIsOn = e\n    });\n    leftDiv.add(smartCropToggle);\n\n    let download = Lab.ui.createIcon('download', () => {\n        Lab.ui.saveBase64Dialog(base64);\n        let appStore=new Lab.AppStore();\n        appStore.save(base64);\n    }, false);\n\n    let copy = Lab.ui.createIcon('copy', () => {\n        Lab.clipboard.write(base64, 'base64');\n        let appStore=new Lab.AppStore();\n        appStore.save(base64);\n    }, false);\n\n    bottomDiv.add(download);\n    bottomDiv.add(copy);\n\n}\n\n\n// 处理图片，抠图-显示\nasync function doImg(url) {\n    Lab.ui.loading(0);\n    let img = await Lab.ui.createImage(url);\n    model.segment(img).then(c => {\n        c.style = `width: auto;\n        margin-top: 32px;\n        max-height: 300px;\n        max-width: 300px;`;\n        imgResult.innerHTML = \"\";\n        base64 = c.src;\n        imgResult.add(c);\n        Lab.ui.loading(100);\n    });\n};",
  "code_length": 29,
  "size": [
    600,
    600
  ],
  "extname": "designlabplugin",
  "version": "0.3",
  "package_version": "0.1.2",
  "package_id": "6b414523d593157c7846fc8919d13db12ee0f635",
  "dependencies": {
    "@ffmpeg-installer/ffmpeg": "^1.0.20",
    "@ffprobe-installer/ffprobe": "^1.1.0",
    "@fortawesome/fontawesome-free": "^5.15.3",
    "@hapi/hapi": "^20.1.2",
    "@node-rs/jieba": "^1.2.0",
    "@paddlejs-models/humanseg": "0.0.5",
    "@tensorflow-models/body-pix": "^2.1.0",
    "@tensorflow-models/deeplab": "^0.2.1",
    "@tensorflow-models/face-landmarks-detection": "0.0.1",
    "@tensorflow-models/knn-classifier": "^1.2.2",
    "@tensorflow-models/mobilenet": "^2.1.0",
    "@tensorflow-models/posenet": "^2.2.2",
    "@tensorflow/tfjs": "^3.3.0",
    "@tensorflow/tfjs-backend-wasm": "^3.3.0",
    "about-window": "^1.14.0",
    "animejs": "^3.2.1",
    "color": "^3.1.3",
    "electron-json-storage": "^4.4.0",
    "electron-squirrel-startup": "^1.0.0",
    "emoji-picker-element": "^1.6.0",
    "emoji-regex": "^9.2.2",
    "espree": "^7.3.1",
    "exceljs": "^4.2.1",
    "face-api.js": "^0.22.2",
    "fluent-ffmpeg": "^2.1.2",
    "fomantic-ui": "^2.8.7",
    "gif.js": "^0.2.0",
    "gifuct-js": "^2.1.1",
    "horajs": "^0.1.3",
    "idb-kv-store": "^4.5.0",
    "internal-ip": "^6.2.0",
    "jimp": "^0.16.1",
    "lowdb": "^1.0.0",
    "make-cert": "^1.2.0",
    "marked": "^1.2.9",
    "md5": "^2.3.0",
    "mime-types": "^2.1.30",
    "mkcert": "^1.4.0",
    "ml": "^6.0.0",
    "natural": "^5.0.3",
    "ngraph.path": "^1.3.1",
    "nouislider": "^14.7.0",
    "object-hash": "^2.1.1",
    "opencvjs-dist": "^4.4.0",
    "osc-js": "^2.1.2",
    "pdfjs-dist": "^2.6.347",
    "peer": "^0.6.1",
    "peerjs": "^1.3.2",
    "pixelit": "https://github.com/giventofly/pixelit.git",
    "recordrtc": "^5.6.2",
    "regl": "^2.1.0",
    "smartcrop": "^2.0.3",
    "socket.io": "^4.0.0",
    "socket.io-client": "^4.0.0",
    "timeago.js": "^4.0.2",
    "unsplash-js": "^7.0.12",
    "wordcloud": "^1.2.2",
    "yoga-layout-wasm": "^1.9.3-alpha.7",
    "zdog": "^1.1.2"
  },
  "author": "shadow",
  "create_time": 1631605247723
}